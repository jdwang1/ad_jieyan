/*!
 *        ______      __
 *       / ____/_  __/ /__________  ____
 *      / /   / / / / __/ ___/ __ \/ __ \
 *     / /___/ /_/ / /_/ /  / /_/ / / / /
 *     \____/\__, /\__/_/   \____/_/ /_/    Cytron™ by Video++
 *          /____/
 * 
 *     cytron-platform@6.28.3-94c9d18a update on 2018-9-13 17:38:25
 * 
 * ****************************************************************
 */
!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="//cytroncdn.videojj.com/release/6.28.3/",t(0)}([function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){o=!0,i=c}finally{try{!r&&a["return"]&&a["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(88),d=o(f),p=n(160),h=o(p),v=n(8),g=o(v),y=n(28),m=n(9),_=r(m),b=n(4),w=n(159),T=o(w),O=n(174),E=o(O),I=n(173),k=o(I),S=n(175),M=o(S),P=n(143),A=r(P),C=n(188),x=o(C),j=n(183),N=o(j),D=n(186),L=o(D),R=n(189),U=n(185),F=o(U);(0,d["default"])("cytron-platform");var q=0,B=n(5)("Cytron");window.Cytron=function(){function e(t,n){a(this,e),this.__containerId=t,this.__config=n}return l(e,[{key:"start",value:function(){var e=this;if(this.hasStart())throw new Error("Cytron 已经启动了...");g["default"].debug&&(0,b.groupStartLog)("CYTRON_START"),this.rootId=g["default"].name+"-"+ ++q,B("=====> Starting Cytron...",this.rootId),this.$container=(0,R.getContainer)(this.__containerId),this.config=(0,R.getConfig)(this.__config),this.session=new x["default"](this.config,this.$container),this.api=new N["default"](this.config,this.session),this.emitter=new T["default"],window.addEventListener("error",this.api.log),h["default"][this.rootId]=this;var t=(0,R.loadVideoConfig)(this.api,this.config).then(function(t){if(!e.hasStart())return{};if(_.assign(e.config,u({},t,e.config)),"normal"!==e.config.mode)return{};B("=====> Loading Cytron VideoData...");var n=e.config.videoDataUrl,r=e.config,o=r.videoDataEnable,i=r.globalDataEnable,s=r.adSummaryEnable;return{videoData:o!==!1?e.api.getVideoData(n):y.Promise.resolve(),globalData:i!==!1?e.api.getGlobalData():y.Promise.resolve(),adSummary:s!==!1?e.api.getAdSummary():y.Promise.resolve()}});y.Promise.all([(0,R.loadPlayerModule)(this.config),t]).then(function(t){var n=c(t,2),r=n[0],o=n[1];return B("=====> Cytron Player and Video Loaded...",o),B("=====> Waiting for player onReady callback..."),new y.Promise(function(t,n){e.player=r(e.$container,e.config),e.player.onError&&e.player.onError(function(e){B("=====> Player onError...",e),n({message:"Player Error "+e,level:"error"})}),e.player.onReady(function(){B("=====> Player onReady..."),t(o)})})}).then(function(t){var n=e.bootstrap(t);return g["default"].debug&&(0,b.groupEndLog)("CYTRON_START"),n})["catch"](function(t){var n=t&&t.level||"",r=t&&t.message||t;(g["default"].debug||"info"!==n)&&(e.api&&e.api.log({message:"Cytron Error: "+r,level:n,cyType:"Core"}),console.error("=====> Cytron Error: ",r))})}},{key:"bootstrap",value:function(e){var t=this;if(!this.hasStart())return this.destroy(),y.Promise.reject({message:"Destroyed",level:"info"});this.api.track({cat:g["default"].trackCategory.videoView}),(0,R.startWindowTrack)(this.api);var n={clientId:this.session.getClientId(),videoId:this.session.getVideoId(),channelId:this.session.getChannel(),projectId:this.session.getProject()};if(this.flowManager=(0,E["default"])(n,this.session),this.adManager=(0,k["default"])(this,u({},n,{autoConnect:!1,onActive:function(e){var n=e.flowMaps,r=e.flows;B("adManager onActive ",n,r),t.runner.registerFlows(r,n)},onInactive:function(e){var n=e.flows;B("adManager onInactive ",n),t.runner.removeFlows(n,"AD_FLOW",!0)}})),this.runner=(0,M["default"])(this),this.actions=this.runner.getStore().bindActions(A),this.player.onPlay(this.runner.onPlay),this.player.onPause(this.runner.onPause),this.player.onStop(this.runner.onStop),this.player.onSetTime(this.runner.onSetTime),this.player.onFullscreen(this.runner.onFullscreen),this.player.onExitFullscreen(this.runner.onExitFullscreen),this.config.onReady&&this.config.onReady(this.player),this.config.disabled)return B("=====> Sorry, Cytron Not Support!",this),y.Promise.reject({message:"Not Support!",level:"info"});this.runner.bootstrap(),this.mqttClient=new L["default"](u({},n,{parent:this.$container,autoConnect:this.config.mqttEnable,onConnect:function(){t.api.track({cat:g["default"].trackCategory.mqttConnect}),t.api.mqttNotify()}})),this.mqttClient.setMsgListener("showFlow",function(e){var n=e.flowMaps,r=e.flows;t.runner&&t.runner.registerFlows(r,n)}),this.mqttClient.setMsgListener("hideFlow",function(e){var n=e.flowId;t.runner&&t.runner.removeFlows([n])});var r=e||{},o=r.videoData,i=r.globalData,s=r.adSummary;o&&o.then(function(e){t.runner&&e&&(B("=====> Register Video Data...",e),t.runner.registerFlows(e.flows,e.flowMaps))}),i&&i.then(function(e){t.runner&&e&&(B("=====> Register Global Flows...",e),t.runner.registerFlows(e.flows,e.flowMaps))}),s&&s.then(function(e){t.adManager&&e&&(B("=====> Register Ad Summary...",e),t.adManager.registerAds(e))});var a=[],c=this.player.opts||{},l=this.config.editorEnable!==!1&&"normal"===this.config.mode&&this.session.getToken(),f=function(e){e+="Enable";var n=c[e]&&"normal"===t.config.mode&&t.session.getIdentity();return void 0!==t.__config[e]?t.__config[e]&&n:void 0!==t.config[e]&&t.config[e]&&n},d=f("vor"),p=f("push"),h=f("mall");return l&&a.push("plugin.editor"),d&&a.push("plugin.vor"),p&&a.push("plugin.push"),h&&a.push("plugin.mall"),g["default"].debug&&a.push("plugin.debug"),this.runner.registerPlugins(a),this.player.isPlaying()&&(B("=====> Runner Started ..."),this.runner.onPlay()),g["default"].cyTime&&this.player.jumpTo(g["default"].cyTime),this.config.onStart&&this.config.onStart(this),B("=====> Cytron Started!",this),y.Promise.resolve("Done!")}},{key:"destroy",value:function(){g["default"].debug||delete h["default"][this.rootId],this.rootId&&B("=====> Cytron Destroy ...",this.rootId),window.removeEventListener("error",this.api.log),this.api&&this.api.destroy(),this.runner&&this.runner.destroy(),this.player&&this.player.destroy(),this.mqttClient&&this.mqttClient.disconnect(),this.emitter&&this.emitter.reset(),this.runner=void 0,this.player=void 0,this.mqttClient=void 0,this.flowManager=void 0,this.adManager=void 0,this.session=void 0,this.config=void 0,this.actions=void 0,this.$container=void 0,this.rootId=void 0,this.emitter=void 0,(0,R.stopWindowTrack)()}},{key:"hasStart",value:function(){return Boolean(this.rootId)}}]),e}(),window.Iva=function(e){function t(e,n){a(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.start(),r}return s(t,e),t}(Cytron),(0,F["default"])()},function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.preact},function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.csjs},function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.jsxKit},function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.helper},function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.debug},,,function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.config},function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.polyfills},function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.storage},,,,,,,function(e,t,n){"use strict";var r="cy",o=function(e){return n(130)(r+":"+e)};o.enable=function(){localStorage.debug=r+":*"},e.exports=o},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t["default"]=r({},{apiAddress:"//cytron.videojj.com/api",authApiAddress:"//videojj.com/api",meApiAddress:"//me.videojj.com/api",vaApiAddress:"//va.videojj.com",logApiAddress:"//log.videojj.com/api",adApiAddress:"//ads-api.videojj.com/api",b2bApiAddress:"//plat.videojj.com",mallSDKAddress:"//cytroncdn.videojj.com/sdks/mangoMall/latest/sdk.js",publicUrl:"//cytroncdn.videojj.com/release/6.28.3/",coreJsUrl:"//cytroncdn.videojj.com/latest/cytron.core.js",myStoreUrl:"http://store.videojj.com/",consoleUrl:"http://cytron.videojj.com/console",baiduTJ:"5c290707a65060057be49240567d7729",mqttPrefix:"cytron",version:"6.28.3",commit:"94c9d18a",assertsUrl:"//cytroncdn.videojj.com/asserts",date:"2018-09-13T09:38:25.904Z",name:"cytron-platform",env:"prod"},{fps:4,serviceType:{alias:"VideoOS",value:3},trackCategory:{videoView:{alias:"视频准备就绪",value:4},videoPause:{alias:"视频暂停",value:17},videoPlay:{alias:"视频播放",value:16},videoClose:{alias:"视频关闭",value:19},videoDrag:{alias:"视频拖动",value:18},videoFocus:{alias:"视频获取焦点",value:25},videoBlur:{alias:"视频失去焦点",value:26},nodePreview:{alias:"预报光",value:10},tagNodeView:{alias:"热点曝光",value:12},tagNodeClick:{alias:"热点点击",value:9},infoNodeView:{alias:"信息层显示",value:34},infoNodeClose:{alias:"信息层关闭",value:20},infoNodeClick:{alias:"信息层有效点击",value:11},infoNodeLink:{alias:"信息层外链点击",value:47},nodeJump:{alias:"节点跳转",value:35},mqttConnect:{alias:"连接MQTT",value:33}}})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.query=t.request=t.script=t.resizeDetector=t.copy=t.shallowEqual=t.debounce=t.assert=t.rgba=t.uid=void 0;var i=n(74);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var s=n(41);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var a=n(62);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var c=n(61);Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})});var u=n(64);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var l=n(58);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})});var f=n(63);Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}})});var d=n(66);Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}})});var p=n(65);Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}})});var h=n(73),v=o(h),g=n(70),y=o(g),m=n(57),_=o(m),b=n(60),w=o(b),T=n(72),O=o(T),E=n(59),I=o(E),k=n(69),S=o(k),M=n(71),P=o(M),A=n(68),C=r(A),x=n(67),j=r(x);t.uid=v["default"],t.rgba=y["default"],t.assert=_["default"],t.debounce=w["default"],t.shallowEqual=O["default"],t.copy=I["default"],t.resizeDetector=S["default"],t.script=P["default"],t.request=C,t.query=j},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(80);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n(82);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})}),n(81)},,function(e,t){var n=e.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){(function(t,r){!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function o(e){return"function"==typeof e}function i(e){$=e}function s(e){J=e}function a(){return function(){return t.nextTick(d)}}function c(){return function(){G(d)}}function u(){var e=0,t=new Z(d),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function l(){var e=new MessageChannel;return e.port1.onmessage=d,function(){return e.port2.postMessage(0)}}function f(){var e=setTimeout;return function(){return e(d,1)}}function d(){for(var e=0;e<K;e+=2){var t=ne[e],n=ne[e+1];t(n),ne[e]=void 0,ne[e+1]=void 0}K=0}function p(){try{var e=n(135);return G=e.runOnLoop||e.runOnContext,c()}catch(t){return f()}}function h(e,t){var n=arguments,r=this,o=new this.constructor(g);void 0===o[oe]&&D(o);var i=r._state;return i?!function(){var e=n[i-1];J(function(){return x(i,o,e,r._result)})}():M(r,o,e,t),o}function v(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(g);return E(n,e),n}function g(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function m(){return new TypeError("A promises callback cannot return that same promise.")}function _(e){try{return e.then}catch(t){return ce.error=t,ce}}function b(e,t,n,r){try{e.call(t,n,r)}catch(o){return o}}function w(e,t,n){J(function(e){var r=!1,o=b(n,t,function(n){r||(r=!0,t!==n?E(e,n):k(e,n))},function(t){r||(r=!0,S(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,S(e,o))},e)}function T(e,t){t._state===se?k(e,t._result):t._state===ae?S(e,t._result):M(t,void 0,function(t){return E(e,t)},function(t){return S(e,t)})}function O(e,t,n){t.constructor===e.constructor&&n===h&&t.constructor.resolve===v?T(e,t):n===ce?S(e,ce.error):void 0===n?k(e,t):o(n)?w(e,t,n):k(e,t)}function E(t,n){t===n?S(t,y()):e(n)?O(t,n,_(n)):k(t,n)}function I(e){e._onerror&&e._onerror(e._result),P(e)}function k(e,t){e._state===ie&&(e._result=t,e._state=se,0!==e._subscribers.length&&J(P,e))}function S(e,t){e._state===ie&&(e._state=ae,e._result=t,J(I,e))}function M(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+se]=n,o[i+ae]=r,0===i&&e._state&&J(P,e)}function P(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,s=0;s<t.length;s+=3)r=t[s],o=t[s+n],r?x(n,r,o,i):o(i);e._subscribers.length=0}}function A(){this.error=null}function C(e,t){try{return e(t)}catch(n){return ue.error=n,ue}}function x(e,t,n,r){var i=o(n),s=void 0,a=void 0,c=void 0,u=void 0;if(i){if(s=C(n,r),s===ue?(u=!0,a=s.error,s=null):c=!0,t===s)return void S(t,m())}else s=r,c=!0;t._state!==ie||(i&&c?E(t,s):u?S(t,a):e===se?k(t,s):e===ae&&S(t,s))}function j(e,t){try{t(function(t){E(e,t)},function(t){S(e,t)})}catch(n){S(e,n)}}function N(){return le++}function D(e){e[oe]=le++,e._state=void 0,e._result=void 0,e._subscribers=[]}function L(e,t){this._instanceConstructor=e,this.promise=new e(g),this.promise[oe]||D(this.promise),W(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&k(this.promise,this._result))):S(this.promise,R())}function R(){return new Error("Array Methods must be provided an Array")}function U(e){return new L(this,e).promise}function F(e){var t=this;return new t(W(e)?function(n,r){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function q(e){var t=this,n=new t(g);return S(n,e),n}function B(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function V(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function H(e){this[oe]=N(),this._result=this._state=void 0,this._subscribers=[],g!==e&&("function"!=typeof e&&B(),this instanceof H?j(this,e):V())}function Y(){var e=void 0;if("undefined"!=typeof r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var o=null;try{o=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===o&&!n.cast)return}e.Promise=H}var z=void 0;z=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var W=z,K=0,G=void 0,$=void 0,J=function(e,t){ne[K]=e,ne[K+1]=t,K+=2,2===K&&($?$(d):re())},Q="undefined"!=typeof window?window:void 0,X=Q||{},Z=X.MutationObserver||X.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3),re=void 0;re=ee?a():Z?u():te?l():void 0===Q?p():f();var oe=Math.random().toString(36).substring(16),ie=void 0,se=1,ae=2,ce=new A,ue=new A,le=0;return L.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ie&&n<e;n++)this._eachEntry(t[n],n)},L.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===v){var o=_(e);if(o===h&&e._state!==ie)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===H){var i=new n(g);O(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},L.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===ie&&(this._remaining--,e===ae?S(r,n):this._result[t]=n),0===this._remaining&&k(r,this._result)},L.prototype._willSettleAt=function(e,t){var n=this;M(e,void 0,function(e){return n._settledAt(se,t,e)},function(e){return n._settledAt(ae,t,e)})},H.all=U,H.race=F,H.resolve=v,H.reject=q,H._setScheduler=i,H._setAsap=s,H._asap=J,H.prototype={constructor:H,then:h,"catch":function(e){return this.then(null,e)}},Y(),H.polyfill=Y,H.Promise=H,H})}).call(t,n(134),function(){return this}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=n(43).cache.style;e.parentNode||(e.setAttribute("type","text/css"),e.setAttribute("id",f["default"].name+"-style"),document.getElementsByTagName("head")[0].appendChild(e));var t=d.join("");return"textContent"in e?e.textContent=t:e.styleSheet.cssText=t,e}function i(){var e=Array.prototype.slice.call(arguments),t=a["default"].apply(null,e),n=a["default"].getCss(t);return d.indexOf(n)===-1&&d.push(n),t}Object.defineProperty(t,"__esModule",{value:!0}),t.initModuleCSS=o,t.csjsModule=i,t["default"]=function(){var e=Array.prototype.slice.call(arguments),t=i.apply(null,e);return Object.keys(t).reduce(function(e,n){return e[n]=t[n].toString(),e},{})};var s=n(121),a=r(s),c=n(56),u=r(c),l=n(19),f=r(l);window.__CYTRON_STYLES__||(window.__CYTRON_STYLES__=[u["default"]]);var d=window.__CYTRON_STYLES__},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CytronPlugin=t.CytronNode=t.TransitionGroup=t.cx=t.pure=t.prefixer=void 0;var o=n(54),i=r(o),s=n(78),a=r(s),c=n(77),u=r(c),l=n(133),f=r(l),d=n(75),p=r(d),h=n(76),v=r(h);t.prefixer=i["default"],t.pure=a["default"],t.cx=u["default"],t.TransitionGroup=f["default"],t.CytronNode=p["default"],t.CytronPlugin=v["default"]},,,function(e,t,n){e.exports=!n(27)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){"use strict";function n(e,t,n){var r=e.join(" ");return Object.create(o.prototype,{classNames:{value:Object.freeze(e),configurable:!1,writable:!1,enumerable:!0},unscoped:{value:Object.freeze(t),configurable:!1,writable:!1,enumerable:!0},className:{value:r,configurable:!1,writable:!1,enumerable:!0},selector:{value:e.map(function(e){return n?e:"."+e}).join(", "),configurable:!1,writable:!1,enumerable:!0},toString:{value:function(){return r},configurable:!1,writeable:!1,enumerable:!1}})}function r(e){return e instanceof o}function o(){}e.exports={makeComposition:n,isComposition:r}},function(e,t,n){!function(){"use strict";function t(){}function n(e,n){var r,o,i,s,a=j;for(s=arguments.length;s-- >2;)x.push(arguments[s]);for(n&&null!=n.children&&(x.length||x.push(n.children),delete n.children);x.length;)if((o=x.pop())&&void 0!==o.pop)for(s=o.length;s--;)x.push(o[s]);else"boolean"==typeof o&&(o=null),(i="function"!=typeof e)&&(null==o?o="":"number"==typeof o?o=String(o):"string"!=typeof o&&(i=!1)),i&&r?a[a.length-1]+=o:a===j?a=[o]:a.push(o),r=i;var c=new t;return c.nodeName=e,c.children=a,c.attributes=null==n?void 0:n,c.key=null==n?void 0:n.key,void 0!==C.vnode&&C.vnode(c),c}function r(e,t){for(var n in t)e[n]=t[n];return e}function o(e,t){return n(e.nodeName,r(r({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}function i(e){!e.__d&&(e.__d=!0)&&1==L.push(e)&&(C.debounceRendering||N)(s)}function s(){var e,t=L;for(L=[];e=t.pop();)e.__d&&k(e)}function a(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&c(e,t.nodeName):n||e._componentConstructor===t.nodeName}function c(e,t){return e.__n===t||e.nodeName.toLowerCase()===t.toLowerCase()}function u(e){var t=r({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var o in n)void 0===t[o]&&(t[o]=n[o]);return t}function l(e,t){var n=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return n.__n=e,n}function f(e){var t=e.parentNode;t&&t.removeChild(e)}function d(e,t,n,r,o){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||o)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var i in n)i in r||(e.style[i]="");for(var i in r)e.style[i]="number"==typeof r[i]&&!1===D.test(i)?r[i]+"px":r[i]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var s=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,h,s):e.removeEventListener(t,h,s),(e.__l||(e.__l={}))[t]=r}else if("list"!==t&&"type"!==t&&!o&&t in e)p(e,t,null==r?"":r),null!=r&&!1!==r||e.removeAttribute(t);else{var a=o&&t!==(t=t.replace(/^xlink\:?/,""));null==r||!1===r?a?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(a?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function p(e,t,n){try{e[t]=n}catch(r){}}function h(e){return this.__l[e.type](C.event&&C.event(e)||e)}function v(){for(var e;e=R.pop();)C.afterMount&&C.afterMount(e),e.componentDidMount&&e.componentDidMount()}function g(e,t,n,r,o,i){U++||(F=null!=o&&void 0!==o.ownerSVGElement,q=null!=e&&!("__preactattr_"in e));var s=y(e,t,n,r,i);return o&&s.parentNode!==o&&o.appendChild(s),--U||(q=!1,i||v()),s}function y(e,t,n,r,o){var i=e,s=F;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||o)?e.nodeValue!=t&&(e.nodeValue=t):(i=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(i,e),_(e,!0))),i.__preactattr_=!0,i;var a=t.nodeName;if("function"==typeof a)return S(e,t,n,r);if(F="svg"===a||"foreignObject"!==a&&F,a=String(a),(!e||!c(e,a))&&(i=l(a,F),e)){for(;e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),_(e,!0)}var u=i.firstChild,f=i.__preactattr_,d=t.children;if(null==f){f=i.__preactattr_={};for(var p=i.attributes,h=p.length;h--;)f[p[h].name]=p[h].value}return!q&&d&&1===d.length&&"string"==typeof d[0]&&null!=u&&void 0!==u.splitText&&null==u.nextSibling?u.nodeValue!=d[0]&&(u.nodeValue=d[0]):(d&&d.length||null!=u)&&m(i,d,n,r,q||null!=f.dangerouslySetInnerHTML),w(i,t.attributes,f),F=s,i}function m(e,t,n,r,o){var i,s,c,u,l,d=e.childNodes,p=[],h={},v=0,g=0,m=d.length,b=0,w=t?t.length:0;if(0!==m)for(var T=0;T<m;T++){var O=d[T],E=O.__preactattr_,I=w&&E?O._component?O._component.__k:E.key:null;null!=I?(v++,h[I]=O):(E||(void 0!==O.splitText?!o||O.nodeValue.trim():o))&&(p[b++]=O)}if(0!==w)for(var T=0;T<w;T++){u=t[T],l=null;var I=u.key;if(null!=I)v&&void 0!==h[I]&&(l=h[I],h[I]=void 0,v--);else if(!l&&g<b)for(i=g;i<b;i++)if(void 0!==p[i]&&a(s=p[i],u,o)){l=s,p[i]=void 0,i===b-1&&b--,i===g&&g++;break}l=y(l,u,n,r),c=d[T],l&&l!==e&&l!==c&&(null==c?e.appendChild(l):l===c.nextSibling?f(c):e.insertBefore(l,c))}if(v)for(var T in h)void 0!==h[T]&&_(h[T],!1);for(;g<=b;)void 0!==(l=p[b--])&&_(l,!1)}function _(e,t){var n=e._component;n?M(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||f(e),b(e))}function b(e){for(e=e.lastChild;e;){var t=e.previousSibling;_(e,!0),e=t}}function w(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||d(e,r,n[r],n[r]=void 0,F);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||d(e,r,n[r],n[r]=t[r],F)}function T(e){var t=e.constructor.name;(B[t]||(B[t]=[])).push(e)}function O(e,t,n){var r,o=B[e.name];if(e.prototype&&e.prototype.render?(r=new e(t,n),P.call(r,t,n)):(r=new P(t,n),r.constructor=e,r.render=E),o)for(var i=o.length;i--;)if(o[i].constructor===e){r.__b=o[i].__b,o.splice(i,1);break}return r}function E(e,t,n){return this.constructor(e,n)}function I(e,t,n,r,o){e.__x||(e.__x=!0,(e.__r=t.ref)&&delete t.ref,(e.__k=t.key)&&delete t.key,!e.base||o?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r),r&&r!==e.context&&(e.__c||(e.__c=e.context),e.context=r),e.__p||(e.__p=e.props),e.props=t,e.__x=!1,0!==n&&(1!==n&&!1===C.syncComponentUpdates&&e.base?i(e):k(e,1,o)),e.__r&&e.__r(e))}function k(e,t,n,o){if(!e.__x){var i,s,a,c=e.props,l=e.state,f=e.context,d=e.__p||c,p=e.__s||l,h=e.__c||f,y=e.base,m=e.__b,b=y||m,w=e._component,T=!1;if(y&&(e.props=d,e.state=p,e.context=h,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(c,l,f)?T=!0:e.componentWillUpdate&&e.componentWillUpdate(c,l,f),e.props=c,e.state=l,e.context=f),e.__p=e.__s=e.__c=e.__b=null,e.__d=!1,!T){i=e.render(c,l,f),e.getChildContext&&(f=r(r({},f),e.getChildContext()));var E,S,P=i&&i.nodeName;if("function"==typeof P){var A=u(i);s=w,s&&s.constructor===P&&A.key==s.__k?I(s,A,1,f,!1):(E=s,e._component=s=O(P,A,f),s.__b=s.__b||m,s.__u=e,I(s,A,0,f,!1),k(s,1,n,!0)),S=s.base}else a=b,E=w,E&&(a=e._component=null),(b||1===t)&&(a&&(a._component=null),S=g(a,i,f,n||!y,b&&b.parentNode,!0));if(b&&S!==b&&s!==w){var x=b.parentNode;x&&S!==x&&(x.replaceChild(S,b),E||(b._component=null,_(b,!1)))}if(E&&M(E),e.base=S,S&&!o){for(var j=e,N=e;N=N.__u;)(j=N).base=S;S._component=j,S._componentConstructor=j.constructor}}if(!y||n?R.unshift(e):T||(e.componentDidUpdate&&e.componentDidUpdate(d,p,h),C.afterUpdate&&C.afterUpdate(e)),null!=e.__h)for(;e.__h.length;)e.__h.pop().call(e);U||o||v()}}function S(e,t,n,r){for(var o=e&&e._component,i=o,s=e,a=o&&e._componentConstructor===t.nodeName,c=a,l=u(t);o&&!c&&(o=o.__u);)c=o.constructor===t.nodeName;return o&&c&&(!r||o._component)?(I(o,l,3,n,r),e=o.base):(i&&!a&&(M(i),e=s=null),o=O(t.nodeName,l,n),e&&!o.__b&&(o.__b=e,s=null),I(o,l,1,n,r),e=o.base,s&&e!==s&&(s._component=null,_(s,!1))),e}function M(e){C.beforeUnmount&&C.beforeUnmount(e);var t=e.base;e.__x=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?M(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.__b=t,f(t),T(e),b(t)),e.__r&&e.__r(null)}function P(e,t){this.__d=!0,this.context=t,this.props=e,this.state=this.state||{}}function A(e,t,n){return g(n,e,{},!1,t,!1)}var C={},x=[],j=[],N="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,D=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,L=[],R=[],U=0,F=!1,q=!1,B={};r(P.prototype,{setState:function(e,t){var n=this.state;this.__s||(this.__s=r({},n)),r(n,"function"==typeof e?e(n,this.props):e),t&&(this.__h=this.__h||[]).push(t),i(this)},forceUpdate:function(e){e&&(this.__h=this.__h||[]).push(e),k(this,2)},render:function(){}});var V={h:n,createElement:n,cloneElement:o,Component:P,render:A,rerender:s,options:C};e.exports=V}()},,,,function(e,t){"use strict";function n(e){return null==e||""===e||!(!Array.isArray(e)||0!==e.length)||"object"===("undefined"==typeof e?"undefined":s(e))&&0===Object.keys(e).length}function r(e){return"function"==typeof e}function o(e){return!isNaN(parseFloat(e))&&isFinite(e)}function i(e){if(!e||"object"!==("undefined"==typeof e?"undefined":s(e)))return!1;var t="function"==typeof e.constructor?Object.getPrototypeOf(e):Object.prototype;if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&a(n)===c}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isEmpty=n,t.isFunction=r,t.isNumeric=o,t.isPlainObject=i;var a=function(e){return Function.prototype.toString.call(e)},c=a(Object)},function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.browser},function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.modules},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(34),o=n(26),i=n(98),s=n(102),a="prototype",c=function(e,t,n){var u,l,f,d=e&c.F,p=e&c.G,h=e&c.S,v=e&c.P,g=e&c.B,y=e&c.W,m=p?o:o[t]||(o[t]={}),_=m[a],b=p?r:h?r[t]:(r[t]||{})[a];p&&(n=t);for(u in n)l=!d&&b&&void 0!==b[u],l&&u in m||(f=l?b[u]:n[u],m[u]=p&&"function"!=typeof b[u]?n[u]:g&&l?i(f,r):y&&b[u]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[a]=e[a],t}(f):v&&"function"==typeof f?i(Function.call,f):f,v&&((m.virtual||(m.virtual={}))[u]=f,e&c.R&&_&&!_[u]&&s(_,u,f)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){var r=n(97);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(107),o=n(100);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(46),o=n(44);e.exports=function(e){return r(o(e))}},function(e,t,n){var r=n(44);e.exports=function(e){return Object(r(e))}},function(e,t){
"use strict";e.exports=" css "},,function(e,t,n){!function(){function e(e){this.message=e}var n=t,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",n.btoa||(n.btoa=function(t){for(var n,o,i=String(t),s=0,a=r,c="";i.charAt(0|s)||(a="=",s%1);c+=a.charAt(63&n>>8-s%1*8)){if(o=i.charCodeAt(s+=.75),o>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|o}return c}),n.atob||(n.atob=function(t){var n=String(t).replace(/[=]+$/,"");if(n.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,i,s=0,a=0,c="";i=n.charAt(a++);~i&&(o=s%4?64*o+i:i,s++%4)?c+=String.fromCharCode(255&o>>(-2*s&6)):0)i=r.indexOf(i);return c})}()},function(e,t,n){var r=n(91)["default"],o=n(90)["default"];!function(e){e()}(function(){"use strict";function t(e,t,n,i){function s(e,t){return c(n,e)&&(i||c(I,t))?n.replace(e,["",t.toLowerCase(),e].join("-")):null}function l(e){return E[e].reduce(function(t,n){return t[n.toLowerCase()]=s(e,n),t},{})}function f(n){var r=u(n).filter(function(e){return null!==e}).map(function(e){return t+":"+e}).join(";");r&&(e[t]=e[t]+";"+r)}function d(){return n.replace("flex-","").toLowerCase()}var p=!0;if("flex"===n&&"display"===t){var h=l("flex");return h.ms&&(h.ms=h.ms.replace("flex","flexbox")),f(h),p&&(e[t]="-webkit-box;display:"+e[t]),e}var v=r(E).filter(function(e){return"flex"!==e}).reduce(function(e,t){return e[t]=l(t),e},{});if(O[t]){var g=i?O[t]:O[t].filter(function(e){return c(I,e)}),y=g.reduce(function(e,o){var i=n;return r(v).forEach(function(e){var t=v[e];r(t).forEach(function(e){t[e]&&a(o)===a(e)&&(i=t[e],t[e]=null)})}),e[o+a(t)]=i,e},{});if(p)switch(t){case"flexDirection":c(n,"reverse")?y.WebkitBoxDirection="reverse":y.WebkitBoxDirection="normal",c(n,"row")?y.WebkitBoxOrient=y.boxOrient="horizontal":c(n,"column")&&(y.WebkitBoxOrient="vertical");break;case"alignSelf":y.msFlexItemAlign=d();break;case"alignItems":y.WebkitBoxAlign=y.msFlexAlign=d();break;case"alignContent":"spaceAround"===n?y.msFlexLinePack="distribute":"spaceBetween"===n?y.msFlexLinePack="justify":y.msFlexLinePack=d();break;case"justifyContent":"spaceAround"===n?y.msFlexPack="distribute":"spaceBetween"===n?y.WebkitBoxPack=y.msFlexPack="justify":y.WebkitBoxPack=y.msFlexPack=d();break;case"flexBasis":y.msFlexPreferredSize=n;break;case"order":y.msFlexOrder="-moz-calc("+n+")",y.WebkitBoxOrdinalGroup="-webkit-calc("+(parseInt(n)+1)+")";break;case"flexGrow":y.WebkitBoxFlex=y.msFlexPositive=n;break;case"flexShrink":y.msFlexNegative=n;break;case"flex":y.WebkitBoxFlex=n}o(e,y)}return r(v).forEach(function(e){f(v[e])}),e}function n(e,o){return r(e).forEach(function(r){var i=e[r];"object"==typeof i?n(i,o):e=t(e,r,i,o)}),e}function i(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return"boolean"==typeof e?function(t){return n(t,e)}:e?n(e,t):{}}var s={range:function(e){for(var t=[],n=0;n<e;n++)t.push(n);return t},capitalize:function(e){return e&&e.charAt(0).toUpperCase()+e.substring(1)},includes:function(e,t){return"number"==typeof e&&(e=e.toString()),e.indexOf(t)!==-1},values:function(e){return r(e).map(function(t){return e[t]})}},a=s.capitalize,c=s.includes,u=s.values,l="Webkit",f="Moz",d="ms",p="o",h=[l],v=[l,p],g=[f],y=[d],m=[l,f],_=[l,f,p],b=[l,f,d],w=[l,d],T=[l,d,f,p],O={alignContent:h,alignItems:h,alignSelf:h,animation:m,animationDelay:m,animationDirection:m,animationDuration:m,animationFillMode:m,animationIterationCount:m,animationName:m,animationPlayState:m,animationTimingFunction:m,appearance:m,backfaceVisibility:m,backgroundClip:h,borderImage:_,borderImageSlice:_,boxShadow:b,boxSizing:m,clipPath:h,columns:m,cursor:m,flex:w,flexBasis:w,flexDirection:w,flexFlow:w,flexGrow:w,flexShrink:w,flexWrap:w,fontSmoothing:m,justifyContent:m,order:m,perspective:m,perspectiveOrigin:m,transform:b,transformOrigin:b,transformOriginX:b,transformOriginY:b,transformOriginZ:b,transformStyle:b,transition:b,transitionDelay:b,transitionDuration:b,transitionProperty:b,transitionTimingFunction:b,userSelect:b},E={calc:m,flex:w},I=function(){if("undefined"==typeof navigator)return T;var e=navigator.userAgent;return c(e,"Chrome")?h:c(e,"Safari")?h:c(e,"Opera")?v:c(e,"Firefox")?g:c(e,"MSIE")?y:[]}();e.exports=i})},function(e,t){"use strict";function n(e){e=e.toLowerCase();var t=e.indexOf("msie ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("trident/");if(n>0){var r=e.indexOf("rv:");return parseInt(e.substring(r+3,e.indexOf(".",r)),10)}var o=e.indexOf("edge/");return o>0&&parseInt(e.substring(o+5,e.indexOf(".",o)),10)}Object.defineProperty(t,"__esModule",{value:!0}),t.detectIE=n;var r=t.ua=navigator.userAgent.toLowerCase(),o=t.IE=n(r),i=(t.notSupport=o&&o<10||/blackberry/i.test(r)||i,t.isModern=!o||o>10,t.isMobile=/android|ios|iphone|ipad|ipod|mobile|blackberry/i.test(r),t.isWeChat=/micromessenger/i.test(r),t.isFireFox=/firefox/i.test(r),t.isSpider=/bot|googlebot|crawler|spider|robot|crawling|phantomjs/i.test(r))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(19),i=r(o),s=i["default"].name;t["default"]="\n  ."+s+" *,\n  ."+s+" *:before,\n  ."+s+" *:after {\n    font-family: 'Helvetica Neue',Helvetica,'PingFang SC','Hiragino Sans GB','Microsoft YaHei',Arial,sans-serif !important;\n    font-weight: 500;\n    box-sizing: border-box;\n    -webkit-tap-highlight-color: rgba(0,0,0,0);\n    font-size: 100%;\n    font-variant-ligatures: none;\n    text-shadow: rgba(0, 0, 0, .01) 0 0 1px;\n    text-rendering: optimizeLegibility;\n    font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-font-smoothing: antialiased;\n    -webkit-text-size-adjust: 100%;\n    -webkit-font-variant-ligatures: none;\n    -ms-overflow-style: none;\n  }\n  ."+s+" *::-webkit-scrollbar {\n    display: none;\n  }\n  ."+s+" audio,\n  ."+s+" canvas,\n  ."+s+" video { display:inline-block; }\n  ."+s+" audio:not([controls]) { display:none;height:0; }\n  ."+s+" a:active,\n  ."+s+" a:hover { outline:0; }\n  ."+s+" b,strong { font-weight:bold; }\n  ."+s+" hr { -moz-box-sizing:content-box; box-sizing:content-box;height:0; }\n  ."+s+" code,\n  ."+s+" pre,\n  ."+s+" samp { font-size:1em; }\n  ."+s+" pre { white-space:pre-wrap; }\n  ."+s+' q { quotes:"\\201C" "\\201D" "\\2018" "\\2019"; }\n  .'+s+" small { font-size:80%; }\n  ."+s+" img { border:0; }\n  ."+s+" svg:not(:root) { overflow:hidden; }\n  ."+s+" figure { margin:0; }\n  ."+s+" fieldset { border:1px solid #c0c0c0;margin:0 2px;padding:0.35em 0.625em 0.75em; }\n  ."+s+" button,\n  ."+s+" input,\n  ."+s+" select,\n  ."+s+" textarea { font-family:inherit; font-size:100%; margin:0; resize: none; }\n  ."+s+" button,\n  ."+s+" input { line-height:normal; }\n  ."+s+" button,\n  ."+s+" select { text-transform:none; }\n  ."+s+" button,\n  ."+s+' input[type="button"],\n  .'+s+' input[type="reset"],\n  .'+s+' input[type="submit"] { -webkit-appearance:button;cursor:pointer; }\n  .'+s+" button[disabled],\n  ."+s+" input[disabled] { cursor:default; }\n  ."+s+' input[type="checkbox"],\n  .'+s+' input[type="radio"] { box-sizing:border-box;padding:0; }\n  .'+s+' input[type="search"] { -webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box; }\n  .'+s+' input[type="search"]::-webkit-search-cancel-button,\n  .'+s+' input[type="search"]::-webkit-search-decoration { -webkit-appearance:none; }\n  .'+s+" button::-moz-focus-inner,\n  ."+s+" input::-moz-focus-inner { border:0;padding:0; }\n  ."+s+" textarea { overflow:auto;vertical-align:top; }\n  ."+s+" .clearfix:after,\n  ."+s+' .clearfix:before { content: " "; display: table; }\n  .'+s+" .clearfix:after { clear: both; }\n  ."+s+" {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    margin: 0;\n    padding: 0;\n    border: none;\n    display: block;\n    font-size: 16px;\n    line-height: 1;\n    pointer-events: none;\n    background: none;\n    z-index: 0;\n  }\n"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e){var r="[AssertError] "+t||"错误的值: "+e;if(n)throw new Error(r);return console.error(r),!1}return!0}},function(e,t){"use strict";function n(e){return console.group?void console.group(e):void console.log("=== GroupStart ===> ",e)}function r(e){return console.groupEnd?void console.groupEnd(e):void console.log("=== GroupEnd ===> ",e)}Object.defineProperty(t,"__esModule",{value:!0}),t.groupStartLog=n,t.groupEndLog=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){if((0,r.isFunction)(e))return e;try{return JSON.parse(JSON.stringify(e))}catch(t){return console.error("Unable to copy obj: "+e),e}};var r=n(41)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){var r=void 0,o=function(){for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];var a=t&&!r;a&&n.apply(void 0,i),r&&clearTimeout(r),r=setTimeout(function(){r=null,!a&&n.apply(void 0,i)},e)};return o.cancel=function(){clearTimeout(r),r=null},o}}},function(e,t){"use strict";function n(e){return e&&e.nodeName?e:"string"==typeof e?0===e.indexOf(".")?document.getElementsByClassName(e.slice(1))[0]:0===e.indexOf("#")?document.getElementById(e.replace("#","")):document.getElementById(e):null}Object.defineProperty(t,"__esModule",{value:!0}),t.getElement=n},function(e,t,n){"use strict";function r(e,t){e=(0,a.isNumeric)(e)?e:0;var n=parseInt(e,10)/1e3,r=Math.floor(n/3600),o=Math.floor((n-3600*r)/60),i=Math.floor(n-3600*r-60*o);return r<10&&(r="0"+r),o<10&&(o="0"+o),i<10&&(i="0"+i),"mins"===t?o+":"+i:r+":"+o+":"+i}function o(e){var t=[1e8,59,59],n=e.split(":").map(function(e,n){return!(0,a.isNumeric)(e)||e<0?0:e>t[n]?t[n]:parseInt(e,10)});return 2===n.length?1e3*(60*i(n[0])+i(n[1])):1e3*(60*i(n[0])*60+60*i(n[1])+i(n[2]))}function i(e){return(0,a.isNumeric)(e)?Number(e):0}function s(e){e=i(e);var t=1e6,n=1e3;if(e>=t){var r=parseInt(e/t);return r+"m"+(e%t?"+":"")}if(e>=1e3){var o=parseInt(e/n);return o+"k"+(e%n?"+":"")}return e||""}Object.defineProperty(t,"__esModule",{value:!0}),t.msToHHMMSS=r,t.hhmmssToMS=o,t.toNumber=i,t.readableNum=s;var a=n(20)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){if(e){var t=l.find(f,function(t){return e[t]});e[t]()}}function i(){var e=l.find(d,function(e){return document[e]});document[e]()}function s(){var e=l.find(p,function(e){return void 0!==document[e]});return h[p.indexOf(e)]}function a(){var e=l.find(p,function(e){return void 0!==document[e]});return document[e]}function c(){return null!==l.find(f,function(e){return root[e]})}Object.defineProperty(t,"__esModule",{value:!0}),t.zIndexForFullscreen=t.fullscreenChangeEvents=t.isFullscreenAPI=t.cancelFullscreenAPI=t.requestFullscreenAPI=void 0,t.requestFullscreen=o,t.exitFullscreen=i,t.getFullscreenChangeEvent=s,t.isFullscreen=a,t.fullScreenEnable=c;var u=n(24),l=r(u),f=t.requestFullscreenAPI=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],d=t.cancelFullscreenAPI=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],p=t.isFullscreenAPI=["fullscreen","webkitIsFullScreen","mozFullScreen","msFullscreenElement"],h=t.fullscreenChangeEvents=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"];t.zIndexForFullscreen=2147483647},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}}function r(e){var t=void 0;if(null==e||"object"!=("undefined"==typeof e?"undefined":o(e)))return e;if(e instanceof Date)return t=new Date,t.setTime(e.getTime()),t;if(e instanceof Array){t=[];for(var n=0,i=e.length;n<i;n++)t[n]=r(e[n]);return t}if(e instanceof Object){t={};for(var s in e)e.hasOwnProperty(s)&&(t[s]=r(e[s]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.compose=n,t.clone=r},function(e,t){"use strict";function n(e){var t=e.nodeType,n=e.themeName,o=(n||"").toLowerCase().indexOf("ott")!==-1?r[t]:n;return t+"."+(o||"default")}Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeKey=n;var r={GatTip:"image",ImageTip:"hint",AdGift:"side",AdInfo:"side",BasicMix:"side",BasicWiki:"side",CardGame:"side",Vote:"blackbottom"}},function(e,t){"use strict";function n(e){if(!e)return e;e=e.replace(/(https:|http:)/g,"");var t=/cdn.videojj.com.*\?.*format.*webp/gi;return t.test(e)?e.replace(/^(.*)(\?.*)$/g,"$1"):e}function r(e,t){if(isNaN(t)||!t||!e||e.indexOf("b2b-goods.videojj.com")===-1)return e;var n="x-oss-process=image/resize,w_",r=n+t;return e.indexOf(n)!==-1?e.replace(/x-oss-process=image\/resize,w_\d*/,r):e+(e.indexOf("?")===-1?"?":"&")+r}Object.defineProperty(t,"__esModule",{value:!0}),t.parseImg=n,t.resizeB2bImg=r},function(e,t){"use strict";function n(e){var t=e.indexOf("?")+1,n=t>0?e.slice(t).split("&"):[];return n.reduce(function(e,t){var n=t.replace(/\=.*/g,""),r=t.replace(n+"=","");return e[n]=i(r),e},{})}function r(e,t){return t=o(t||""),t?(e+"&"+t).replace(/[&?]{1,2}/,"?"):e}function o(e){return"string"==typeof e?e:Object.keys(e).reduce(function(t,n){var r=null===e[n]?"":e[n];return void 0!==r&&(t+=""+(t&&"&")+encodeURIComponent(n)+"="+encodeURIComponent(r)),t},"")}Object.defineProperty(t,"__esModule",{value:!0}),t.parse=n,t.append=r,t.toString=o;var i=function(e){return"false"!==e&&("true"===e||decodeURIComponent(e))}},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.host;return/^([\w-]+:)?\/\/([^\/]+)/.test(e),RegExp.$2!==t}function o(e,t){var n=/^(\/\/)|^(http:)|^(https:)/.test(e);return n?e:t+e}function i(e){var t=new XMLHttpRequest;if(!r(e)||"withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest){var n=/^https?/;if(window.location.href.match(n)[0]!==e.match(n)[0])throw new Error("XDomainRequest: requests must be targeted to the same scheme as the hosting page.");return new XDomainRequest}throw new Error("Browser does not support cross-origin requests")}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return new g.Promise(function(c,u){function l(r){return o<n?setTimeout(function(){return s(e,t,n,o+1,a).then(c)["catch"](u)},1e3):u(r)}var f=["HEAD","GET","POST","PUT","PATCH","DELETE"],d=(t.method||"GET").toUpperCase();if(f.indexOf(d)===-1)throw new Error("Invalid options.method "+d);var p=t.body||"",g={url:y.query.append(e,t.qs),method:d};p&&(g.body=p);var m=i(g.url);m.onload=function(){var e="status"in m,t=!e||m.status>=200&&m.status<300,n={status:m.status,retry:o,request:g};try{n.data=JSON.parse(m.responseText)}catch(r){n.data=m.responseText}t?c(n):u(n)},m.onreadystatechange=function(){switch(m.readyState){case 1:a.push("OPENED");break;case 2:a.push("HEADERS_RECEIVED");break;case 3:a.push("LOADING");break;case 4:a.push("DONE:"+m.status);break;default:a.push("OTHER:"+m.readyState)}},m.ontimeout=function(){l({message:"网络请求超时: XMLHttpRequest Timeout",states:a.join(","),request:g})},m.onerror=function(){l({message:"网络请求错误: XMLHttpRequest Error",states:a.join(","),request:g})},m.open(d,g.url,!0),m.timeout=t.timeout||0;var _=v({Accept:"application/json, text/plain, */*","Content-Type":"application/x-www-form-urlencoded"},t.headers,!r(e)&&{"X-Requested-With":"XHRHttpRequest"}),b="object"===h(t.body)?JSON.stringify(g.body):g.body;return m.setRequestHeader&&Object.keys(_).forEach(function(e){m.setRequestHeader(e,_[e])}),m.send(b)})}function a(e,t,n,r){return s(e,v({method:"HEAD",qs:t},n),r)}function c(e,t,n,r){return s(e,v({method:"GET",qs:t},n),r)}function u(e,t,n,r){return s(e,v({method:"POST",body:t},n),r)}function l(e,t,n,r){return s(e,v({method:"PUT",body:t},n),r)}function f(e,t,n,r){return s(e,v({method:"PATCH",body:t},n),r)}function d(e,t,n,r){return s(e,v({method:"DELETE",body:t},n),r)}function p(e,t){var n="cytronJsonpHandle_"+(0,y.uid)(),r={url:y.query.append(e,v({callback:n},t)),method:"JSONP"},o=void 0;return window[n]=function(e){delete window[n],o=e},(0,y.script)(r.url,null,!1).then(function(){return g.Promise.resolve({data:o,request:r})})["catch"](function(e){return delete window[n],g.Promise.reject({message:e.message,request:r})})}Object.defineProperty(t,"__esModule",{value:!0});var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.isCrossDomain=r,t.mkReqUrl=o,t.mkRequest=i,t.$ajax=s,t.$head=a,t.$get=c,t.$post=u,t.$put=l,t.$patch=f,t.$delete=d,t.$jsonp=p;var g=n(28),y=n(20);n(17)("request")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(19),i=r(o),s="position:absolute;left:0;top:0;width:100%;height:100%;margin:0;border:none;opacity:0;pointer-events:none;z-index:-9999";t["default"]=function(e,t){if(!e||!e.nodeName)throw new Error("非法的element: "+e);var n=document.createElement("iframe");return n.style.cssText=s,n.className=i["default"].name+"-resize-detector",e.appendChild(n),n.contentWindow&&(n.contentWindow.onresize=function(){return t(e)}),{destroy:function(){n.contentWindow&&(n.contentWindow.onresize=void 0),n.parentNode&&n.parentNode.removeChild(n)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=/#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})/i;t["default"]=function(e){if(!n.test(e))return e;var t=e.match(n).filter(function(e){return 2===e.length}).map(function(e){return parseInt(e,16)}),r=t.shift()/255;return"rgba("+t.join(",")+", "+r+")"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e=0===e.indexOf("//")?window.location.protocol+e:e,new r.Promise(function(r,i){var s=function a(s){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=t||document.getElementsByTagName("head")[0];if(!u)return void i({message:"parent is undefined",src:e});var l=document.createElement("script");l.async=!0,n&&(l.crossOrigin="anonymous"),l.type="text/javascript",l.charset="utf-8",l.src=e+(c>0?"?"+Math.random():""),o("$script %s loading, retry: %s",l.src,c),l.onload=l.onreadystatechange=l.onerror=function(e){var t="load"===e.type||/^(loaded|complete)$/.test(l.readyState),n="error"===e.type;return n&&c<s?(l.parentElement&&l.parentElement.removeChild(l),void a(s,c+1)):void((t||n)&&(l.parentElement&&l.parentElement.removeChild(l),t?r():i({message:"cannot load script",src:l.src}),o("$script %s "+e.type,l.src)))},u.appendChild(l)};s(3)})};var r=n(28),o=n(17)("loader")},function(e,t){"use strict";function n(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function r(e,t){if(n(e,t))return!0;if("object"!==("undefined"==typeof e?"undefined":o(e))||null===e||"object"!==("undefined"==typeof t?"undefined":o(t))||null===t)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(var a=0;a<r.length;a++)if(!i.call(t,r[a])||!n(e[r[a]],t[r[a]]))return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.prototype.hasOwnProperty;t["default"]=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){return Math.random().toString(36).substr(2,9)}},function(e,t){"use strict";function n(e){return!!(e&&e._id&&e.nodes&&e.nodes.length)}function r(e){return!!(e&&e._id&&e.nodes&&e.nodes.length)}function o(e){return!!(e&&e._id&&e.nodeId&&e.nodeType)}function i(e){return!!(e&&e._id&&e.nodeId&&e.nodeType&&e.nodeData&&e.initedStyle)}Object.defineProperty(t,"__esModule",{value:!0}),t.validFlowMap=n,t.validFlowData=r,t.validFlowMapNode=o,t.validFlowDataNode=i},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=u(["\n  .cytronNode {\n    position: absolute;\n    display: block;\n    box-sizing: border-box;\n    padding: 0;\n    margin: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    color: white;\n    pointer-events: auto;\n    overflow: hidden;\n  }\n  .cytronNode.flash {\n    -webkit-animation: 0.8s ease-in-out infinite flash alternate;\n            animation: 0.8s ease-in-out infinite flash alternate;\n  }\n  @-webkit-keyframes flash {\n    from { opacity: 1; }\n    to { opacity: 0; }\n  }\n  @keyframes flash {\n    from { opacity: 1; }\n    to { opacity: 0; }\n  }\n  .cytronNode.hover {\n    z-index: 101;\n  }\n"],["\n  .cytronNode {\n    position: absolute;\n    display: block;\n    box-sizing: border-box;\n    padding: 0;\n    margin: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    color: white;\n    pointer-events: auto;\n    overflow: hidden;\n  }\n  .cytronNode.flash {\n    -webkit-animation: 0.8s ease-in-out infinite flash alternate;\n            animation: 0.8s ease-in-out infinite flash alternate;\n  }\n  @-webkit-keyframes flash {\n    from { opacity: 1; }\n    to { opacity: 0; }\n  }\n  @keyframes flash {\n    from { opacity: 1; }\n    to { opacity: 0; }\n  }\n  .cytronNode.hover {\n    z-index: 101;\n  }\n"]),p=n(37),h=n(29),v=o(h),g=n(24),y=r(g),m=n(20),_=n(30),b=n(19),w=o(b),T=n(17)("CytronNode"),O=w["default"].trackCategory,E=(0,v["default"])(d),I={enterTimeout:500,enterDelay:100,leaveTimeout:300,leaveDelay:0,enter:{opacity:0,transform:"translateY(-40px)"},active:{opacity:1,transform:"none"},leave:{opacity:0,transform:"translateY(-40px)"}};t["default"]=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{keepActive:""};return function(r){var o,u=(0,_.pure)(o=function(e){function t(e,o){s(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o));i.triggerPortOut=function(e,t){if(!i.isEditing&&("string"==typeof e&&(e={id:e}),"SLOT_NONE"!==e.id)){if("SLOT_CLOSE"===e.id){var n=r.transitions||I,o=n.leave,s=n.leaveTimeout,a=void 0===s?0:s,c=n.leaveDelay,u=void 0===c?0:c,f=n.property,d=void 0===f?"opacity, transform":f,p=n.timingFunction,h=void 0===p?"ease":p;return i.setState({transitionStyle:(0,_.prefixer)(l({},o,{transitionProperty:d,transitionDelay:u+"ms",transitionDuration:a+"ms",transitionTimingFunction:h}))}),clearTimeout(i.closeTimer),void(i.closeTimer=setTimeout(i.doTriggerPortOut,a+u,e,t))}i.doTriggerPortOut(e,t)}},i.doTriggerPortOut=function(e,t){var n=i.context.actions,r=i.props.node;T("triggerPortOut",e,t,r),n&&n.scene.triggerNext(r,e,t).dispatchAsync()},i.doSetKeepActive=function(e){var t=i.context.actions,n=i.props.node;n.keepActive=e,T("setKeepActive",e),t&&t.scene.refresh("KEEP_ACTIVE").dispatchAsync()},i.triggerClose=function(e){e&&e.stopPropagation(),i.triggerPortOut("SLOT_CLOSE")},i.triggerCloseListener=function(e){if(i.isEditing)return function(){};var t=i.context.rootElement,n=function(t){t.target===i.base||i.base.contains(t.target)||(t.preventDefault(),e?e(t):i.triggerClose(t))};return i.removeCloseListener&&i.removeCloseListener(),t&&t.addEventListener("mousedown",n),i.removeCloseListener=function(){i.removeCloseListener=void 0,t&&t.removeEventListener("mousedown",n)},i.removeCloseListener},i.triggerVoteGet=function(e){if(i.isEditing)return Promise.resolve({});var t=i.context.api,n=i.props.node;return i.cache.vote?Promise.resolve(i.cache.vote):t.ajax.get("/flow/vote",{nodeId:e||n.nodeId,flowId:n._flowId}).then(function(e){var t=e.data;return i.cache.vote=l({},i.cache.vote,t),t})},i.triggerVoteCall=function(e,t){if(i.isEditing)return Promise.resolve({});if(!e&&!t)return console.warn("VoteCall 数据不完整 optionIds: "+e+", nodeId: "+t),Promise.resolve({});var n=i.context.api,r=i.props.node;return r.isInfo&&i.triggerTrackApiCall(O.infoNodeClick,{link:""}),n.ajax.post("/flow/vote",{optionId:e,nodeId:t||r.nodeId,flowId:r._flowId}).then(function(e){var t=e.data;return i.cache.vote=l({},i.cache.vote,t),t})},i.triggerLink=function(e){if(!i.isEditing){var t=e||{},n=t.url,r=t._id;n&&(i.props.node.isInfo&&i.triggerTrackApiCall(O.infoNodeLink,{link:r||""}),i.context.openUrl(n))}},i.triggerLotteryGetStatus=function(e){if(i.isEditing)return Promise.resolve({passed:!0});var t=i.context.api,n=i.props.node;return e=e||{},t.ajax.get("/lottery/predraw",l({},e,{flowId:e.flowId||n._flowId,resourceId:e.resourceId||n._resourceId})).then(function(e){if(e.data)return e.data;throw e})},i.triggerDrawCall=function(e){if(i.isEditing)return Promise.resolve({});var t=i.context.api,n=i.props.node;return e=e||{},t.ajax.post("/lottery/draw",l({},e,{flowId:e.flowId||n._flowId,resourceId:e.resourceId||n._resourceId})).then(function(e){if(e.data)return e.data;throw e})},i.triggerNodePreview=function(){if(!i.preview){i.preview=!0;var e=i.props.node,t=e.initedStyle||{},n=t.top,r=t.left,o=r?Math.round(100*r):"",s=n?Math.round(100*n):"";i.triggerTrackApiCall(O.nodePreview,{x:o,y:s,ext:JSON.stringify({matchingid:"preview"})})}},i.triggerNodeView=function(e){if(!i.viewed){i.viewed=!0;var t=i.props.node;if(t.isTag||t.isInfo){i.preview||e||api&&api.log({message:"triggerNodeView Error: "+t.nodeType+"("+t._id+")",level:"warning",cyType:"Track"});var n=t.isTag?O.tagNodeView:O.infoNodeView,r=t.initedStyle||{},o=r.top,s=r.left,a=s?Math.round(100*s):"",c=o?Math.round(100*o):"";i.triggerTrackApiCall(n,l({x:a,y:c},i.preview&&{ext:JSON.stringify({matchingid:"viewed"})}))}}},i.triggerTrackApiCall=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i.isEditing){var n=i.context.api,r=i.props.node,o=l({cat:e,tag:r._flowId,dg:r._resourceId},t);n.track(o)}},i.triggerMonitorCall=function(e,t){!i.isEditing&&Array.isArray(t)&&t.forEach(function(t){return t.type===e&&i.context.api.monitor(t)})},i.onNodeHover=function(){i.state.isHover||(i.setState({isHover:!0}),"onHover"===n.keepActive&&i.doSetKeepActive(!0))},i.onNodeRealease=function(){i.setState({isHover:!1}),"onHover"===n.keepActive&&(clearTimeout(i.activeTimer),i.activeTimer=setTimeout(function(){i.doSetKeepActive(!1)},500))},i.onNodeClicked=function(){var e=i.props.node;if(e.isTag&&i.triggerTrackApiCall(O.tagNodeClick),e.hasTime){var t=i.context.player.checkDot;t&&t(e._id)}var n=e.nodeData;i.triggerMonitorCall("click",n&&n.monitors)},i.startTrackStyleUpdater=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!i.trackUpdateTimer||!t){i.stopTrackStyleUpdater();var n=i.props.node,r=n.tracks,o=n.nodeData,s=o&&o.autoTrack;if(r&&r.length&&s){var a=i.context.player.getTime()||0,c=r.reduce(function(e,t,n){var o=t.time;if(!(0,m.isEmpty)(e))return e;var i=r[n+1];return o<=a&&i&&a<=i.time&&y.assign(e,i,{idx:n}),e},{});if((0,m.isEmpty)(c)){var u=r[0];if(u&&u.time>a)return void i.setState({trackStyle:l({},u,{visibility:"hidden",opacity:0,status:"ready"})});var f=r[r.length-1];return f&&f.time<a?void i.setState({trackStyle:l({},f,{visibility:"hidden",opacity:0,status:"ended"})}):void i.setState({trackStyle:null})}var d=i.state.trackStyle,p=Math.abs(c.time-a),h=d?Math.abs(d.time-c.time):0,v=d?c.left-d.left:0,g=d?c.top-d.top:0,_=Math.sqrt(v*v+g*g),b=500,w=_>.2||h>b||p>b,T=p,O=w?{opacity:0,transition:"none"}:{opacity:1,transition:"\n            left "+T+"ms linear,\n            top "+T+"ms linear,\n            width "+T+"ms linear,\n            height "+T+"ms linear,\n            opacity 100ms linear\n          "},E=w?p-200:p,I=l({},c,O,{status:"tracking"}),k=!d||d.idx!==I.idx||d.transition!==I.transition;k&&i.setState({trackStyle:I}),e&&(i.trackUpdateTimer=setTimeout(i.startTrackStyleUpdater,E))}}},i.stopTrackStyleUpdater=function(){i.trackUpdateTimer&&(clearTimeout(i.trackUpdateTimer),i.trackUpdateTimer=void 0)},i.formatStyle=function(e){var t=["top","left","bottom","right","width","height"],n=["which","ratio"],r=Object.keys(e||{}).reduce(function(r,o){if(n.indexOf(o)!==-1)return r;var i=e[o];return t.indexOf(o)!==-1?r[o]=(0,m.isNumeric)(i)?100*i+"%":i:r[o]=i,r},{}),o=i.props.canDisplay,s=void 0===o||o;return y.assign(r,!s&&{visibility:"hidden"})};var c=r.transitions||I,u=c.enter,f=(0,_.prefixer)(l({},u));return i.vnodeId=(0,m.uid)(),i.isEditing=e.isEditing||o.isEditing,i.state={transitionStyle:f},i.cache={},"onInit"===n.keepActive&&i.doSetKeepActive(!0),i}return c(t,e),f(t,[{key:"getChildContext",value:function(){return{triggerTrackApiCall:this.triggerTrackApiCall,triggerNodePreview:this.triggerNodePreview,triggerNodeView:this.triggerNodeView,triggerMonitorCall:this.triggerMonitorCall,triggerLink:this.triggerLink,triggerVoteCall:this.triggerVoteCall,triggerVoteGet:this.triggerVoteGet,triggerDrawCall:this.triggerDrawCall,triggerLotteryGetStatus:this.triggerLotteryGetStatus,triggerClose:this.triggerClose,triggerCloseListener:this.triggerCloseListener,triggerPortOut:this.triggerPortOut,getLayout:this.getLayout,formatStyle:this.formatStyle,isPlaying:this.props.isPlaying,backdrop:this.props.backdrop,isEditing:this.isEditing}}},{key:"triggerComponentResize",value:function(){this.$node&&this.$node.componentDidResize&&(clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(this.$node.componentDidResize.bind(this.$node,!0)))}},{key:"componentDidMount",value:function(){var e=this;this.mountTimer=setTimeout(function(){
var t=e.props.node;e.nodeMountTime=Date.now(),e.preview||e.triggerNodeView(!0),e.triggerMonitorCall("show",t.nodeData.monitors),e.base.addEventListener("click",e.onNodeClicked),e.base.addEventListener("mouseover",e.onNodeHover),e.base.addEventListener("mouseleave",e.onNodeRealease);var n=r.transitions||I,o=n.active,i=n.enterTimeout,s=void 0===i?0:i,a=n.enterDelay,c=void 0===a?0:a,u=n.property,f=void 0===u?"opacity, transform":u,d=n.timingFunction,p=void 0===d?"ease":d,h=(0,_.prefixer)(l({},o,{transitionProperty:f,transitionDelay:c+"ms",transitionDuration:s+"ms",transitionTimingFunction:p}));e.setState({transitionStyle:h}),e.startTrackStyleUpdater(e.props.isPlaying),e.triggerComponentResize()})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.mountTimer),clearTimeout(this.activeTimer),clearTimeout(this.resizeTimer),clearTimeout(this.closeTimer),clearTimeout(this.trackUpdateTimer);var e=Date.now()-this.nodeMountTime,t=this.props.node;this.base.removeEventListener("click",this.onNodeClicked),this.base.removeEventListener("mouseover",this.onNodeHover),this.base.removeEventListener("mouseleave",this.onNodeRealease),t.isInfo&&this.triggerTrackApiCall(O.infoNodeClose,{dr:e}),t.keepActive&&(t.keepActive=void 0),this.stopTrackStyleUpdater(),this.mountTimer=this.activeTimer=this.resizeTimer=this.closeTimer=this.trackUpdateTimer=void 0,this.removeCloseListener&&this.removeCloseListener()}},{key:"componentDidUpdate",value:function(e,t){!this.isEditing&&(0,m.shallowEqual)(e.dpi,this.props.dpi)&&(0,m.shallowEqual)(e.canDisplay,this.props.canDisplay)&&(0,m.shallowEqual)(t.trackStyle,this.state.trackStyle)||this.triggerComponentResize()}},{key:"componentWillReceiveProps",value:function(e){var t=e.trackTime,n=e.isPlaying,r=Math.abs(t-this.props.trackTime)>0,o=n&&!this.props.isPlaying;o||r?this.startTrackStyleUpdater(n,r):n||this.stopTrackStyleUpdater()}},{key:"render",value:function(e,t){var n,o=this,s=(0,_.cx)(E.cytronNode,(n={},i(n,E.flash,this.isEditing&&e.node.nodeData.autoHidden),i(n,E.hover,t.isHover),n)),a=e.trackStyle||t.trackStyle;return(0,p.h)(r,{key:e.node._nodeKey+"_"+e.node._id+"_ins",ref:function(e){o.$node=e},className:s,style:l({},t.transitionStyle,this.formatStyle(e.style)),trackStyle:a,trackState:t.trackState,node:e.node,nodes:e.nodes})}},{key:"getLayout",value:function(e){return e<480?"min":e>=720?"max":"mid"}}]),t}(p.Component))||o;return"defineCytronModule"in window&&defineCytronModule("module."+e+"."+t,function(n,r){return{nodeType:e,theme:t,component:u}}),u}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(30);t["default"]=function(e,t){return function(n){var o=(0,r.pure)(n);return"defineCytronModule"in window&&defineCytronModule("plugin."+e,function(n,r){var i=t||{},s=i.reducer,a=i.defaultState;return{name:e,reducer:s,defaultState:a,component:o}}),o}}},function(e,t){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var i="undefined"==typeof o?"undefined":r(o);if("string"===i||"number"===i)e.push(o);else if(Array.isArray(o))e.push(n.apply(null,o));else if("object"===i)for(var s in o)({}).hasOwnProperty.call(o,s)&&o[s]&&e.push(s)}}return e.join(" ")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t["default"]=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(20);t["default"]=function(e){return e.prototype.shouldComponentUpdate=function(e,t){var n=r({},this.props,{children:void 0}),i=r({},e,{children:void 0}),s=this.props.children,a=e.children;return!(0,o.shallowEqual)(s,a)||!(0,o.shallowEqual)(n,i)||!(0,o.shallowEqual)(this.state,t)},e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){var e={},t={},n=document.createElement("style");Object.defineProperty(window,"defineCytronModule",{value:function(n,r){delete t[n],e[n]=r}});var a=function(n,a){return new r.Promise(function(r,i){return e[n]?void r(e[n]):t[n]?(s("%c"+n+".js已经在加载中...","color: #d60303;"),void t[n].then(function(){r(e[n])})):void(t[n]=(0,o.script)(a).then(function(){r(e[n])},i))}).then(function(e){return s("%c"+n+".js 加载完成...","color: #d60303;"),(0,i.initModuleCSS)(),e||function(){}})};return{cache:{defined:e,loading:t,style:n},load:a}};var r=n(28),o=n(20),i=n(29),s=n(17)("modules")},function(e,t){"use strict";function n(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,o=arguments[1],i=0;i<r;i++)if(t=n[i],e.call(o,t,i,n))return t}function r(e){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,o=arguments[1],i=0;i<r;i++)if(t=n[i],e.call(o,t,i,n))return i;return-1}function o(e,t){return n.call(e,t)}function i(e,t){return r.call(e,t)}function s(e){if(null==this)throw new TypeError("this is null or not defined");for(var t=Object(this),n=t.length>>>0,r=arguments[1],o=r>>0,i=o<0?Math.max(n+o,0):Math.min(o,n),s=arguments[2],a=void 0===s?n:s>>0,c=a<0?Math.max(n+a,0):Math.min(a,n);i<c;)t[i]=e,i++;return t}function a(e,t){return s.call(e,t)}function c(e){var t=Object(this),n=parseInt(t.length)||0;if(0===n)return!1;var r,o=parseInt(arguments[1])||0;o>=0?r=o:(r=n+o,r<0&&(r=0));for(var i;r<n;){if(i=t[r],e===i||e!==e&&i!==i)return!0;r++}return!1}function u(e,t){return c.call(e,t)}function l(e,t){return e.indexOf(t)!==-1}Object.defineProperty(t,"__esModule",{value:!0}),t.find=o,t.findIndex=i,t.fill=a,t.includes=u,t.contains=l},function(e,t,n){"use strict";var r=n(53);window.btoa=window.btoa||r.btoa,window.atob=window.atob||r.atob},function(e,t){"use strict";function n(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.assign=n},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){var e={},t=function n(){var t=Object.keys(e),r=i.find(t,function(t){return"doing"===e[t]}),o=i.find(t,function(t){return"todo"===e[t]});if(!r&&o){e[o]="doing";var s=new Image(1,1);s.onload=s.onerror=function(){e[o]="done",s.src="",s.onload=s.onerror=void 0,setTimeout(n,500)},s.src=o}};return function(n){n&&!e[n]&&(e[n]="todo",t())}};var o=n(24),i=r(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(19),i=r(o),s=i["default"].env||(i["default"].debug?"debug":"prod"),a="cytron-platform."+s,c=n(17)("Storage");t["default"]={get:function(e){var t=a+"."+e,n=window.localStorage.getItem(t);if(!n)return n;try{return JSON.parse(n)}catch(r){return c("get error",r),null}},set:function(e,t){var n=a+"."+e;return window.localStorage.setItem(n,JSON.stringify(t))},remove:function(e){var t=a+"."+e;return window.localStorage.removeItem(t)},clear:function(){window.localStorage.clear()}}},,,,function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(37),a=o(s),c=n(19),u=o(c),l=n(84),f=o(l),d=n(17),p=o(d),h=n(55),v=r(h),g=n(29),y=r(g),m=n(20),_=r(m),b=n(30),w=r(b),T=n(24),O=r(T),E=_.query.parse(location.search),I=void 0!==E.cyDebug?E.cyDebug:u["default"].debug;window.__CYTRON_LIB__||("local"===u["default"].version&&p["default"].enable(),Object.defineProperty(window,"__CYTRON_LIB__",{value:{config:i({},u["default"],I&&E,{debug:I}),preact:a["default"],debug:p["default"],csjs:y,helper:_,jsxKit:w,polyfills:O,browser:v,storage:f["default"],preload:n(83)["default"](),modules:n(79)["default"](),styles:__CYTRON_STYLES__,instances:{}}})),t["default"]=function(e){if(I){var t=u["default"].version,n=u["default"].commit,r=u["default"].date;console.log("%c🚀 "+e+"@"+t+"."+n+" update on "+new Date(r).toLocaleString(),"color:#888;")}}},,function(e,t,n){e.exports={"default":n(92),__esModule:!0}},function(e,t,n){e.exports={"default":n(93),__esModule:!0}},function(e,t,n){n(117),e.exports=n(26).Object.assign},function(e,t,n){n(118),e.exports=n(26).Object.keys},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(35);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var r=n(49),o=n(114),i=n(113);e.exports=function(e){return function(t,n,s){var a,c=r(t),u=o(c.length),l=i(s,u);if(e&&n!=n){for(;u>l;)if(a=c[l++],a!=a)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(94);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(35),o=n(34).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(105),o=n(110);e.exports=n(33)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){e.exports=!n(33)&&!n(27)(function(){return 7!=Object.defineProperty(n(99)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";var r=n(47),o=n(106),i=n(108),s=n(50),a=n(46),c=Object.assign;e.exports=!c||n(27)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=s(e),c=arguments.length,u=1,l=o.f,f=i.f;c>u;)for(var d,p=a(arguments[u++]),h=l?r(p).concat(l(p)):r(p),v=h.length,g=0;v>g;)f.call(p,d=h[g++])&&(n[d]=p[d]);return n}:c},function(e,t,n){var r=n(95),o=n(103),i=n(115),s=Object.defineProperty;t.f=n(33)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return s(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(101),o=n(49),i=n(96)(!1),s=n(111)("IE_PROTO");e.exports=function(e,t){var n,a=o(e),c=0,u=[];for(n in a)n!=s&&r(a,n)&&u.push(n);for(;t.length>c;)r(a,n=t[c++])&&(~i(u,n)||u.push(n));return u}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(45),o=n(26),i=n(27);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],s={};s[e]=t(n),r(r.S+r.F*i(function(){n(1)}),"Object",s)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(112)("keys"),o=n(116);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t,n){var r=n(34),o="__core-js_shared__",i=r[o]||(r[o]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,n){var r=n(48),o=Math.max,i=Math.min;e.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(48),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(35);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(45);r(r.S+r.F,"Object",{assign:n(104)})},function(e,t,n){var r=n(50),o=n(47);n(109)("keys",function(){return function(e){return o(r(e))}})},function(e,t,n){"use strict";e.exports=n(124)},function(e,t,n){"use strict";e.exports=n(126)},function(e,t,n){"use strict";var r=n(119);e.exports=r,e.exports.csjs=r,e.exports.getCss=n(120)},function(e,t){"use strict";var n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";e.exports=function(e){if(0===e)return"0";for(var t="";e>0;)t=n[e%62]+t,e=Math.floor(e/62);return t}},function(e,t,n){"use strict";function r(e){function t(e){return Object.keys(e).forEach(function(o){n[o]||(n[o]=!0,r.push(o),t(e[o]))})}var n={},r=[];return t(e),r}var o=n(36).makeComposition;e.exports=function(e,t,n){var i=Object.keys(t).reduce(function(e,n){var r=t[n];return e[r]=o([n],[r],!0),e},{}),s=Object.keys(e).reduce(function(t,i){var s=e[i],a=n[i],c=a?r(a):[],u=[i].concat(c),l=u.map(function(t){return e[t]?e[t]:t});return t[s]=o(u,l),t},i);return s}},function(e,t,n){"use strict";function r(e){return a(e)?e.selector:e}function o(e,t){return e.map(function(e,n){return n!==t.length?e+t[n]:e}).join("")}function i(e,t){return Object.keys(e).reduce(function(n,r){return t[r]||(n[r]=e[r]),n},{})}var s=n(125),a=n(36).isComposition,c=n(123),u=n(129),l=n(51);e.exports=function(e){for(var t=Array(arguments.length-1),n=1;n<arguments.length;n++)t[n-1]=arguments[n];var f=o(e,t.map(r)),d=t.reduce(function(e,t){return a(t)&&t.classNames.forEach(function(n,r){e[n]=t.unscoped[r]}),e},{}),p=u(f,d),h=s(p.css),v=i(p.classes,d),g=i(p.keyframes,d),y=h.compositions,m=c(v,g,y);return Object.defineProperty(m,l,{enumerable:!1,configurable:!1,writeable:!1,value:h.css})}},function(e,t,n){"use strict";function r(e){return e.split(",").map(o)}function o(e){var t=e.trim();return"."===t[0]?t.substr(1):t}var i=(n(36).makeComposition,/\.([^\s]+)(\s+)(extends\s+)(\.[^{]+)/g);e.exports=function(e){function t(e,t){var n=o(t[1]),i=t[3],s=t[4],a=t.index+t[1].length+t[2].length,c=i.length+s.length;e.css=e.css.slice(0,a)+" "+e.css.slice(a+c+1);var u=r(s);return u.forEach(function(t){e.compositions[n]||(e.compositions[n]={}),e.compositions[t]||(e.compositions[t]={}),e.compositions[n][t]=e.compositions[t]}),e}for(var n,s=[];n=i.exec(e);)s.unshift(n);return s.reduce(t,{css:e,compositions:{}})}},function(e,t,n){"use strict";var r=n(51);e.exports=function(e){return e[r]}},function(e,t){"use strict";e.exports=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}},function(e,t,n){"use strict";var r=n(122),o=n(127);e.exports=function(e){var t=r(o(e));return function(e){return e+"_"+t}}},function(e,t,n){"use strict";function r(e,t){function n(e,n){function o(o,i,s){var a=t[s]?s:r(s);return e[n][a]=s,i+a}var i=s[n];return{css:e.css.replace(i,o),keyframes:e.keyframes,classes:e.classes}}var r=i(e),s={classes:u,keyframes:l},a=Object.keys(s).reduce(n,{css:e,keyframes:{},classes:{}});return o(a)}function o(e){var t=Object.keys(e.keyframes).reduce(function(t,n){return t[e.keyframes[n]]=n,t},{}),n=Object.keys(t);if(n.length){var r="((?:animation|animation-name)\\s*:[^};]*)("+n.join("|")+")([;\\s])"+c,o=new RegExp(r,"g"),i=e.css.replace(o,function(e,n,r,o){return n+t[r]+o});return{css:i,keyframes:e.keyframes,classes:e.classes}}return e}var i=n(128),s=/(\.)(?!\d)([^\s\.,{\[>+~#:)]*)(?![^{]*})/.source,a=/(@\S*keyframes\s*)([^{\s]*)/.source,c=/(?!(?:[^*\/]|\*[^\/]|\/[^*])*\*+\/)/.source,u=new RegExp(s+c,"g"),l=new RegExp(a+c,"g");e.exports=r},function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var o=0,i=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,r),e}function i(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}}function a(){var e;try{e=t.storage.debug}catch(n){}return e}function c(){try{return window.localStorage}catch(e){}}t=e.exports=n(131),t.log=i,t.formatArgs=o,t.save=s,t.load=a,t.useColors=r,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(a())},function(e,t,n){function r(){return t.colors[l++%t.colors.length]}function o(e){function n(){}function o(){var e=o,n=+new Date,i=n-(u||n);e.diff=i,e.prev=u,e.curr=n,u=n,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=r());var s=Array.prototype.slice.call(arguments);s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;a++;var o=t.formatters[r];if("function"==typeof o){var i=s[a];n=o.call(e,i),s.splice(a,1),a--}return n}),"function"==typeof t.formatArgs&&(s=t.formatArgs.apply(e,s));var c=o.log||t.log||console.log.bind(console);c.apply(e,s)}n.enabled=!1,o.enabled=!0;var i=t.enabled(e)?o:n;return i.namespace=e,i}function i(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(e=n[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function s(){t.enable("")}function a(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=o,t.coerce=c,t.disable=s,t.enable=i,t.enabled=a,t.humanize=n(132),t.names=[],t.skips=[],t.formatters={};var u,l=0},function(e,t){function n(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function r(e){return e>=u?Math.round(e/u)+"d":e>=c?Math.round(e/c)+"h":e>=a?Math.round(e/a)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function o(e){return i(e,u,"day")||i(e,c,"hour")||i(e,a,"minute")||i(e,s,"second")||e+" ms"}function i(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,a=60*s,c=60*a,u=24*c,l=365.25*u;e.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t["long"]?o(e):r(e)}},function(e,t,n){!function(t,r){e.exports=r(n(37))}(this,function(e){function t(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function n(e,t){var n=e.attributes&&e.attributes.key;return null===n||void 0===n?t:n}function r(e,t){var n=e._ptgLinkedRefs||(e._ptgLinkedRefs={});return n[t]||(n[t]=function(n){e.refs[t]=n})}function o(e){for(var t={},r=0;r<e.length;r++){var o=n(e[r],r.toString(36));t[o]=e[r]}return t}function i(e,t){e=e||{},t=t||{};var n=function(n){return t.hasOwnProperty(n)?t[n]:e[n]},r={},o=[];for(var i in e)t.hasOwnProperty(i)?o.length&&(r[i]=o,o=[]):o.push(i);var s={};for(var a in t){if(r.hasOwnProperty(a))for(var c=0;c<r[a].length;c++){var u=r[a][c];s[r[a][c]]=n(u)}s[a]=n(a)}for(var l=0;l<o.length;l++)s[o[l]]=n(o[l]);return s}var s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},l=function(e){return e},f=function(n){function l(){var e,t,r;s(this,l);for(var i=arguments.length,a=Array(i),c=0;c<i;c++)a[c]=arguments[c];return e=t=u(this,n.call.apply(n,[this].concat(a))),t.refs={},t.state={children:o(t.props.children||[])},t.performEnter=function(e){t.currentlyTransitioningKeys[e]=!0;var n=t.refs[e];n.componentWillEnter?n.componentWillEnter(t._handleDoneEntering.bind(t,e)):t._handleDoneEntering(e)},t.performLeave=function(e){t.currentlyTransitioningKeys[e]=!0;var n=t.refs[e];n.componentWillLeave?n.componentWillLeave(t._handleDoneLeaving.bind(t,e)):t._handleDoneLeaving(e)},r=e,u(t,r)}return a(l,n),l.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},l.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t)},l.prototype.componentWillReceiveProps=function(e){var t=o(e.children||[]),n=this.state.children;this.setState({children:i(n,t)});var r=void 0;for(r in t)if(t.hasOwnProperty(r)){var s=n&&n.hasOwnProperty(r);!t[r]||s||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(r in n)if(n.hasOwnProperty(r)){var a=t&&t.hasOwnProperty(r);!n[r]||a||this.currentlyTransitioningKeys[r]||this.keysToLeave.push(r)}},l.prototype.componentDidUpdate=function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},l.prototype.performAppear=function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)},l.prototype._handleDoneAppearing=function(e){var t=this.refs[e];t.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e];var n=o(this.props.children||[]);n&&n.hasOwnProperty(e)||this.performLeave(e)},l.prototype._handleDoneEntering=function(e){var t=this.refs[e];t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e];var n=o(this.props.children||[]);n&&n.hasOwnProperty(e)||this.performLeave(e)},l.prototype._handleDoneLeaving=function(e){var n=this.refs[e];n.componentDidLeave&&n.componentDidLeave(),delete this.currentlyTransitioningKeys[e];var r=o(this.props.children||[]);if(r&&r.hasOwnProperty(e))this.performEnter(e);else{var i=t({},this.state.children);delete i[e],this.setState({children:i})}},l.prototype.render=function(t,n){var o=t.childFactory,i=(t.transitionLeave,t.transitionName,t.transitionAppear,t.transitionEnter,t.transitionLeaveTimeout,t.transitionEnterTimeout,t.transitionAppearTimeout,t.component),s=c(t,["childFactory","transitionLeave","transitionName","transitionAppear","transitionEnter","transitionLeaveTimeout","transitionEnterTimeout","transitionAppearTimeout","component"]),a=n.children,u=[];for(var l in a)if(a.hasOwnProperty(l)){var f=a[l];if(f){var d=r(this,l),p=e.cloneElement(o(f),{ref:d,key:l});u.push(p)}}return e.h(i,s,u)},l}(e.Component);return f.defaultProps={component:"span",childFactory:l},f})},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){v&&p&&(v=!1,p.length?h=p.concat(h):g=-1,h.length&&a())}function a(){if(!v){var e=o(s);v=!0;for(var t=h.length;t;){for(p=h,h=[];++g<t;)p&&p[g].run();g=-1,t=h.length}p=null,v=!1,i(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var l,f,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var p,h=[],v=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new c(e,t)),1!==h.length||v||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){},,,,,,,,function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.toast=t.scene=void 0;var o=n(171),i=r(o),s=n(172),a=r(s);t.scene=i,t.toast=a},,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(17)("Emitter"),i=function s(){r(this,s);var e={};this.data=e,this.on=function(t,n){var r=e[t]||(e[t]=[]);r.push(n)},this.off=function(t,n){var r=e[t];r.splice(r.indexOf(n),1)},this.emit=function(t,n,r){var i=e[t]||[];!r&&o("emit: ",t,n),i.forEach(function(e){return e(n)})},this.reset=function(){return Object.keys(e).forEach(function(t){e[t]=[]})}};t["default"]=i},function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.instances},function(e,t){"use strict";e.exports=window.__CYTRON_LIB__.preload},,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=c(["\n  .toastWrapper {\n    display: block;\n    text-align: center;\n    pointer-events: auto;\n  }\n  .toastRoot {\n    color: white;\n    display: inline-block;\n    cursor: pointer;\n    width: auto;\n    padding: 8px 10px;\n    margin: 5px;\n    line-height: 20px;\n    text-align: left;\n    margin: 5px;\n    font-size: 13px;\n    font-weight: normal;\n    border-radius: 3px;\n    box-shadow: 0 1px 6px rgba(0, 0, 0, 0.2), 0 1px 4px rgba(0, 0, 0, 0.3);\n    -webkit-animation: toast-enter ","ms ease-in;\n            animation: toast-enter ","ms ease-in;\n    -webkit-animation-fill-mode: both;\n            animation-fill-mode: both;\n  }\n  .enter {\n    -webkit-animation: none;\n            animation: none;\n  }\n  .leave {\n    -webkit-animation: toast-leave ","ms ease-out;\n            animation: toast-leave ","ms ease-out;\n    -webkit-animation-fill-mode: both;\n            animation-fill-mode: both;\n  }\n  .success {\n    background-color: #71b570;\n  }\n  .warn {\n    background-color: #f89406;\n  }\n  .error {\n    background-color: #f26969;\n  }\n  .info {\n    background-color: #7986cb;\n  }\n  @-webkit-keyframes toast-enter {\n    0% {\n      opacity: 0;\n      -webkit-transform: translateY(-100px) scale(0.2);\n              transform: translateY(-100px) scale(0.2);\n    }\n    100% {\n      opacity: 1;\n      -webkit-transform: translateY(0) scale(1);\n              transform: translateY(0) scale(1);\n    }\n  }\n  @keyframes toast-enter {\n    0% {\n      opacity: 0;\n      -webkit-transform: translateY(-100px) scale(0.2);\n              transform: translateY(-100px) scale(0.2);\n    }\n    100% {\n      opacity: 1;\n      -webkit-transform: translateY(0) scale(1);\n              transform: translateY(0) scale(1);\n    }\n  }\n  @-webkit-keyframes toast-leave {\n    0% {\n      opacity: 1;\n      -webkit-transform: translateY(0) scale(1);\n              transform: translateY(0) scale(1);\n    }\n    100% {\n      opacity: 0;\n      -webkit-transform: translateY(-100px);\n              transform: translateY(-100px);\n    }\n  }\n  @keyframes toast-leave {\n    0% {\n      opacity: 1;\n      -webkit-transform: translateY(0) scale(1);\n              transform: translateY(0) scale(1);\n    }\n    100% {\n      opacity: 0;\n      -webkit-transform: translateY(-100px);\n              transform: translateY(-100px);\n    }\n  }\n"],["\n  .toastWrapper {\n    display: block;\n    text-align: center;\n    pointer-events: auto;\n  }\n  .toastRoot {\n    color: white;\n    display: inline-block;\n    cursor: pointer;\n    width: auto;\n    padding: 8px 10px;\n    margin: 5px;\n    line-height: 20px;\n    text-align: left;\n    margin: 5px;\n    font-size: 13px;\n    font-weight: normal;\n    border-radius: 3px;\n    box-shadow: 0 1px 6px rgba(0, 0, 0, 0.2), 0 1px 4px rgba(0, 0, 0, 0.3);\n    -webkit-animation: toast-enter ","ms ease-in;\n            animation: toast-enter ","ms ease-in;\n    -webkit-animation-fill-mode: both;\n            animation-fill-mode: both;\n  }\n  .enter {\n    -webkit-animation: none;\n            animation: none;\n  }\n  .leave {\n    -webkit-animation: toast-leave ","ms ease-out;\n            animation: toast-leave ","ms ease-out;\n    -webkit-animation-fill-mode: both;\n            animation-fill-mode: both;\n  }\n  .success {\n    background-color: #71b570;\n  }\n  .warn {\n    background-color: #f89406;\n  }\n  .error {\n    background-color: #f26969;\n  }\n  .info {\n    background-color: #7986cb;\n  }\n  @-webkit-keyframes toast-enter {\n    0% {\n      opacity: 0;\n      -webkit-transform: translateY(-100px) scale(0.2);\n              transform: translateY(-100px) scale(0.2);\n    }\n    100% {\n      opacity: 1;\n      -webkit-transform: translateY(0) scale(1);\n              transform: translateY(0) scale(1);\n    }\n  }\n  @keyframes toast-enter {\n    0% {\n      opacity: 0;\n      -webkit-transform: translateY(-100px) scale(0.2);\n              transform: translateY(-100px) scale(0.2);\n    }\n    100% {\n      opacity: 1;\n      -webkit-transform: translateY(0) scale(1);\n              transform: translateY(0) scale(1);\n    }\n  }\n  @-webkit-keyframes toast-leave {\n    0% {\n      opacity: 1;\n      -webkit-transform: translateY(0) scale(1);\n              transform: translateY(0) scale(1);\n    }\n    100% {\n      opacity: 0;\n      -webkit-transform: translateY(-100px);\n              transform: translateY(-100px);\n    }\n  }\n  @keyframes toast-leave {\n    0% {\n      opacity: 1;\n      -webkit-transform: translateY(0) scale(1);\n              transform: translateY(0) scale(1);\n    }\n    100% {\n      opacity: 0;\n      -webkit-transform: translateY(-100px);\n              transform: translateY(-100px);\n    }\n  }\n"]),d=n(1),p=n(2),h=r(p),v=n(4),g=n(3),y={
timeout:300},m=(0,h["default"])(f,y.timeout,y.timeout,y.timeout,y.timeout),_=(0,g.pure)(u=function(e){function t(e,n){i(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.onRemoveToast=function(){clearTimeout(r.timeoutId),r.setState({leave:!0}),setTimeout(function(){var e=r.props.id;r.context.actions.toast.remove(e).dispatch()},y.timeout)},r.state={},r}return a(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){return e.setState({enter:!0})},y.timeout);var t=this.props.timeout;(0,v.isNumeric)(t)&&(this.timeoutId=setTimeout(this.onRemoveToast,t))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutId)}},{key:"render",value:function(e,t){var n,r=e.type,i=e.message,s=(0,g.cx)(m.toastRoot,m[r],(n={},o(n,m.leave,t.leave),o(n,m.enter,!t.leave&&t.enter),n));return(0,d.h)("div",{className:m.toastWrapper},(0,d.h)("div",{className:s,onClick:this.onRemoveToast},i))}}]),t}(d.Component))||u;t["default"]=_},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getContextHelpers=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(4);t.getContextHelpers=function(e){return{openUrl:function(t){if(t.indexOf("vmall://")!==-1){var n=t.replace(/vmall:\/\/([^?]*).*/g,"$1"),i=r({},o.query.parse(t));e.emitter.emit("vmall",{name:n,payload:i})}else window.open(t,"_blank")}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function c(e,t){var n=k[e.rootId];n.rootInstance=(0,h.render)((0,h.h)(n.Root,{key:e.rootId,plugins:t,state:e.runner.getStore().getState()}),e.$container,n.rootInstance)}function u(e,t){k[e.rootId]={Root:I(e)},c(e,t)}function l(e){var t=k[e.rootId];if(t){(0,h.render)((0,h.h)("span",{id:e.rootId}),e.$container,t.rootInstance);var n=document.getElementById(e.rootId);setTimeout(function(){n.parentElement&&n.parentElement.removeChild(n),k[e.rootId]=void 0})}}Object.defineProperty(t,"__esModule",{value:!0}),t.RootComponent=void 0;var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=a(["\n  .nodes {}\n  .plugins {}\n  .toasts {\n    position: absolute;\n    left: 50%;\n    top: 10px;\n    -webkit-transform: translateX(-50%);\n            transform: translateX(-50%);\n    z-index: 9999999;\n    text-align: center;\n  }\n"],["\n  .nodes {}\n  .plugins {}\n  .toasts {\n    position: absolute;\n    left: 50%;\n    top: 10px;\n    -webkit-transform: translateX(-50%);\n            transform: translateX(-50%);\n    z-index: 9999999;\n    text-align: center;\n  }\n"]);t.refresh=c,t.start=u,t.destroy=l;var h=n(1),v=n(2),g=r(v),y=n(4),m=n(8),_=r(m),b=n(166),w=r(b),T=n(169),O=n(5)("renderer"),E=(0,g["default"])(p),I=t.RootComponent=function(e){return function(t){function n(t){o(this,n);var r=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return r.onActiveHiddenNodes=function(){var t=function(){clearTimeout(r.autoHiddenTimer),r.autoHiddenTimer=setTimeout(function(){r.autoHiddenTimer=void 0,e.actions.scene.hideHidden().dispatch()},2e3)};r.props.state.scene.isShowHidden||e.actions.scene.showHidden().dispatch(),t()},r.onResize=(0,y.debounce)(300,!0)(function(){r.setupDimension(),r.forceUpdate(),O("resize...",e.session.getDPI())}),r.setupDimension=function(){e.$container&&e.session.setDPI(r.getBaseDimension())},r.getBaseDimension=function(){return e.$container.getBoundingClientRect()},r.state={},r}return s(n,t),d(n,[{key:"getChildContext",value:function(){return f({config:e.config,player:e.player,runner:e.runner,actions:e.actions,session:e.session,flowManager:e.flowManager,mqttClient:e.mqttClient,rootElement:e.$container,rootId:e.rootId,api:e.api,emitter:e.emitter,getBaseDimension:this.getBaseDimension},(0,T.getContextHelpers)(e))}},{key:"componentDidMount",value:function(){e.$container&&(this.setupDimension(),this.detector=(0,y.resizeDetector)(e.$container,this.onResize),e.$container.addEventListener("mousemove",this.onActiveHiddenNodes))}},{key:"componentDidUpdate",value:function(){var t=e.player.getLayer?e.player.getLayer():null;if(t){var n=this.props.state.scene.hookState,r=n.backdrop||n.layerMode;t.style.display=r?"none":""}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.autoHiddenTimer),this.detector.destroy(),e.$container&&e.$container.removeEventListener("mousemove",this.onActiveHiddenNodes)}},{key:"renderNodes",value:function(t,n,r){var o=t.scene,i=o.hookState||{},s=e.player.opts||{},a=e.runner.getDisplayingNodes(),c=a.reduce(function(e,t){var n=t._state.hookState,r=n.backdrop,o=n.layerMode,i=t.isFloat||r||o,s=!e||t.activeTime>e.activeTime;return i&&s?t:e},null),u=e.player.isPlaying(),l=function(e){if(r)return!0;if(o.activePlugin)return!0;if(o.popup)return!0;if(e.isHidden)return!0;var t=i.layerMode||s.pauseLayerEnable&&!u;if(t&&e._state.hideInLayerMode)return!0;var n=e._state.hookState,a=n.backdrop,l=n.layerMode;return!!(a||l||e.isFloat)&&e!==c},f=a.filter(function(e){return!e.nodeData.autoHidden||o.isShowHidden}).map(function(t){var r=e.runner.getModule(t._nodeKey);return(0,h.h)(r,{key:t._nodeKey+"_"+t._id,style:t.initedStyle,isPlaying:u,trackTime:(0,y.isEmpty)(t.tracks)?null:o.currentTime,backdrop:i.backdrop||i.layerMode,canDisplay:!l(t),dpi:n,node:t})}),d=e.rootId+"-nodes";return(0,h.h)("div",{className:E.nodes,key:d},f)}},{key:"renderPlugins",value:function(t,n,r){var o=this,i=this.props.plugins||{},s=t.scene,a=s.activePlugin,c=s.hookState,u=s.isShowHidden,l=c||{},d=l.layerMode,p=l.backdrop,v=e.runner.setActivePlugin,g=e.player.isPlaying(),y=Object.keys(i).map(function(s){var c=i[s],l=a&&a!==s;if(!c)return null;var y=e.rootId+"-plugin_"+s;return o[y]||(o[y]={onActivate:v.bind(o,s),onInactivate:v.bind(o,null)}),(0,h.h)(i[s],f({key:y},o[y],{state:t[s],dpi:n,isPlaying:g,isShowHidden:u,invisible:r,disabled:l&&"inactive"||d&&"layerMode"||p&&"backdrop"}))}),m=e.rootId+"-plugins";return(0,h.h)("div",{className:E.plugins,key:m},y)}},{key:"renderToasts",value:function(t){var n=t.toasts||{},r=Object.keys(n).length>0,o=!r&&{display:"none"},i=e.rootId+"-toasts";return(0,h.h)("div",{key:i,style:o,className:E.toasts},Object.keys(n).map(function(e){var t=n[e];return(0,h.h)(w["default"],f({key:"toast_"+e},t))}))}},{key:"render",value:function(t){var n=t.state,r=e.session.getDPI(),o=e.session.getWidth(),i=e.session.getHeight(),s=e.player.opts.minWidth||400,a=e.player.opts.minHeight||230,c=i<a||o<s;return(0,h.h)("div",{id:e.rootId,className:_["default"].name,style:{maxHeight:i||"auto",display:c?"none":"block"}},this.renderNodes(n,r,c),this.renderPlugins(n,r,c),this.renderToasts(n,r))}}]),n}(h.Component)},k={Root:void 0,rootInstance:void 0}},function(e,t){"use strict";function n(){return{type:"PLAY",payload:null}}function r(){return{type:"PAUSE",payload:null}}function o(e){return{type:"UPDATE_TIME",meta:{ignoreLog:!0},payload:Math.max(0,e)}}function i(e){return o(e)}function s(){return{type:"STOP",payload:null}}function a(){return{meta:{ignoreLog:!0},type:"SHOW_HIDDEN"}}function c(){return{meta:{ignoreLog:!0},type:"HIDE_HIDDEN"}}function u(e,t,n){return{type:"TRIGGER_NEXT",payload:{currentNode:e,slot:t,portData:n}}}function l(e){return{type:"SET_ACTIVE_PLUGIN",payload:e}}function f(e){return{type:"REFRESH",payload:e}}function d(){return{type:"DESTROY",payload:null}}Object.defineProperty(t,"__esModule",{value:!0}),t.play=n,t.pause=r,t.updateTime=o,t.setTime=i,t.stop=s,t.showHidden=a,t.hideHidden=c,t.triggerNext=u,t.setActivePlugin=l,t.refresh=f,t.destroy=d},function(e,t){"use strict";function n(e){return{type:"SHOW_TOAST",payload:{type:"error",option:e},meta:{ignoreLog:!0}}}function r(e){return{type:"SHOW_TOAST",payload:{type:"warn",option:e},meta:{ignoreLog:!0}}}function o(e){return{type:"SHOW_TOAST",payload:{type:"success",option:e},meta:{ignoreLog:!0}}}function i(e){return{type:"SHOW_TOAST",payload:{type:"info",option:e},meta:{ignoreLog:!0}}}function s(e){return{type:"REMOVE_TOAST",payload:{id:e},meta:{ignoreLog:!0}}}Object.defineProperty(t,"__esModule",{value:!0}),t.error=n,t.warn=r,t.success=o,t.info=i,t.remove=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=t.onActive,r=t.onInactive,o={};return{hasAds:function(){return Object.keys(o).length>0},registerAds:function(e){e&&e.length&&(e&&e.forEach(function(e,t){o[t]={query:e.query,inTime:e.startTime,outTime:e.endTime}}),c("registerAds",o))},getNewActiveAds:function(t,s){var u=function(e){e.activeTime=void 0,e.detail&&(r(e.detail),e.detail=void 0)},l=Date.now(),f=(new Date).toLocaleDateString(),d=Object.keys(o).map(function(e){return o[e]}).filter(function(t){var r=(0,i.isNumeric)(t.inTime)&&s>=t.inTime-100,o=(0,i.isNumeric)(t.outTime)&&s>t.outTime,d=!r||o;return d?(t.activeTime&&u(t),!1):(t.activeTime||(t.activeTime=l,e.api.getAdDetail(t.query).then(function(e){if(t.activeTime){var r=e._id,o=e.frequency,i=o&&1===o.fType?o.times:null,s=a["default"].get("ad-frequency")||{};s.date!==f&&(s.counts={},s.date=f);var u=s.counts[r]||0;(!i||u<i)&&(s.counts[r]=u+1,t.detail=e,n(t.detail)),c("AdDetail Loaded",e,r,o,u,i),a["default"].set("ad-frequency",s)}})),!0)});return d}}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=o;var i=n(4),s=n(10),a=r(s),c=n(5)("ad")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e,t){function n(e){return(0,s.validFlowMap)(e)?(e.nodes.forEach(function(t){t._nodeId=e._id+"_"+t.nodeId,t._nodeKey=(0,s.getNodeKey)(t)}),void(g[e._id]=e)):void console.warn("格式不合法的FlowMap",e)}function r(e,t){var n=y[e];return n?t?void(n.isDeleted=!0):(n.nodes.forEach(function(e){var t=e._id,n=m[t];delete m[n._id]}),void delete y[e]):void f("删除失败，没有找到对应的flowId: "+e)}function o(e){if(e&&e.web){if(0===e.global&&e.videoId!==v)return void console.warn("热点视频Id不匹配",e);if(y[e._id])return void console.warn("重复添加已经存在的Flow",e);if(!u(e))return void console.warn("热点ShowInfo不匹配",e);if(!(0,s.validFlowData)(e))return void console.warn("格式不合法的FlowData",e);var t=g[e.flowMapId];if(!(0,s.validFlowMap)(t))return void console.error("flows:"+e._id+" 的 flowMapId:"+e.flowMapId+" 未能匹配到合法的flowMap");e.nodes.forEach(function(n,r){var o=c.find(t.nodes,function(e){return e.nodeId===n.nodeId});(0,s.assert)(o,"flow:"+e._id+" node: "+n._id+" 未能在flowMap中匹配到nodeId为 "+n.nodeId+" 的节点"),n._mongoId=n._id,n._id=e._id+"_"+r,n._nodeId=e.flowMapId+"_"+n.nodeId,n._flowId=e._id,n._flowMapId=e.flowMapId,n._resourceId=e.resourceId,n._nodeKey=o._nodeKey,n.nodeData.title||(n.nodeData.title=e.title),n.tracks=n.tracks?n.tracks.sort(function(e,t){return e.time-t.time}):[],n._state={hideInLayerMode:o.hideInLayerMode,lifeLimit:n.nodeData.lifeLimit||o.lifeLimit,hookState:o.hookState||{},flowMapNode:o};var u=c.find(o.portOut,function(e){return"LIVE_TIME"===e.portType});if(u)n.liveTime=a(n,"portOutPayload",u.portId);else{var f=c.find(o.portIn,function(e){return"TIME"===e.portType}),d=c.find(o.portOut,function(e){return"TIME"===e.portType}),p=n.tracks;if(f){var h=a(n,"portInPayload",f.portId),v=p.reduce(function(e,t){return Math.min(e,t.time)},1/0);n.inTime=(0,s.isNumeric)(v)&&v<1/0?v:h}if(d){var g=a(n,"portOutPayload",d.portId),y=p.reduce(function(e,t){return Math.max(e,t.time)},0);n.outTime=Math.max(y||0,g)}}n.hasTime=(0,s.isNumeric)(n.inTime)||(0,s.isNumeric)(n.liveTime),n.isInfo=!n.hasTime||n.nodeType===t.primaryNodeType,n.isTag=n.hasTime&&!n.isInfo,(0,l["default"])(i(n)),m[n._id]=n}),y[e._id]=e}}function i(e){if(!e.hasTime)return null;var t=e.nodeData,n=t.logo||t.icon||t.image||t.banner,r=n&&0===n.type&&n.src||"";return(0,s.parseImg)(r)}function a(e,t,n){return e[t]?e[t][n]:(console.error("数据有误：node."+t+" 缺失, _id: "+e._id+", flowId: "+e._flowId),null)}function u(e){var n=e.showInfos;if(!n||n.length<1)return!0;var r=t.now(),o=c.find(n,function(e){if(!e)return!1;var t=new Date(e.beginTime).getTime()||0,n=new Date(e.endTime).getTime()||1/0;return r>=t&&r<n});return o}function d(e){var t=e._state,n=t.lifeCount=t.lifeCount||0,r=t.lifeLimit,o=r&&n>=r;return!o&&(t.lifeCount=n+1,!0)}function p(){return!(0,s.isEmpty)(m)}function h(){return Object.keys(m).map(function(e){return m[e]})}var v=e.videoId,g={},y={},m={};return{triggerNextNode:function(e,t){var n=t.id,o=e._state,i=o.flowMapNode,s=c.find(i.portOut,function(e){return e.slotId===n})||{},a=y[e._flowId],u=g[e._flowMapId],l="triggerCount_"+n,f=o[l]=(o[l]||0)+1,p=s.triggerLimit;if(p&&f>=p&&(o.lifeLimit=1,e.isDirty=!0),!s.toPort)return a.isDeleted&&r(a._id),e.isDirty=!0,e.fromNode&&(e.fromNode.isHidden=!1,e.fromNode.isDirty=!t.isHidden),null;var h=c.find(u.nodes,function(e){return!!e.portIn&&c.find(e.portIn,function(e){return e.portId===s.toPort&&e.portType===s.portType})}),v=c.find(a.nodes,function(e){return e._nodeId===h._nodeId});return d(v)?(t.isHidden?e.isHidden=!0:e.isDirty=!0,v.fromNode=e,v.keepActive=!0,v.isDirty=!1,v):null},getFlowMap:function(e){var t=g[e];return t},hasNodes:p,getNodes:h,addFlowMap:n,addFlow:o,removeFlow:r,getFlow:function(e){return y[e]},getNewActiveNodes:function(e,t){var n=function(e){e.activeTime=void 0,e.liveTime=void 0,e.keepActive=!1},r=Date.now(),o=h().filter(function(e){var o=(0,s.isNumeric)(e.liveTime),i=(0,s.isNumeric)(e.activeTime),a=(0,s.isNumeric)(e.inTime)&&t<e.inTime,c=(0,s.isNumeric)(e.inTime)&&t>=e.inTime,u=(0,s.isNumeric)(e.outTime)&&t>e.outTime,l=!o&&(!c||u),f=o&&i&&r-e.activeTime>=e.liveTime,p=e.isDirty,h=e.keepActive;if(p)return(a||u)&&(e.isDirty=!1),n(e),!1;if(!h&&l)return n(e),!1;if(!h&&f)return n(e),!1;if(!i){if(!d(e))return n(e),!1;e.activeTime=r}return!0});return o}}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var s=n(4),a=n(9),c=o(a),u=n(161),l=r(u),f=n(5)("flow")},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];return Object.keys(R).reduce(function(r,o){var i=n.payload,a=n.type,c=(R[o]||{})[a],u=t[o]||L[o],l=(0,f.isFunction)(c)&&c(u,i,e,n);return r[o]=l?s({},l):u,r},L)}function n(){k("=====> runner bootstrap"),U.dispatch(b.scene.refresh("TIME_FLOW")),E.start(e,D),U.subscribe(function(){E.refresh(e,D)})}function r(){k("=====> runner destroy"),U.dispatch(b.scene.destroy()),U.destroy(),E.destroy(e)}function o(){return U}function i(){var e=U.getState().scene.activeNodes,t=void 0===e?[]:e;return t.filter(function(e){return!e.isDirty})}function a(e){U.dispatchAsync(b.scene.setActivePlugin(e))}function u(t){return new I.Promise(function(n,r){if(!t||!t.length)return n();var o=t.map(function(t){var n=c["default"].publicUrl+t+".js";return(0,d.load)(t,n).then(function(t){return t(e.$container,e.config)},function(t){e.api.log({message:"loadModule Failed: "+JSON.stringify(t),cyType:"Script",filter:1})})});return I.Promise.all(o).then(function(e){e.forEach(function(e){var t=e.name,n=e.reducer,r=e.defaultState,o=e.component;k("register plugin:",t);var i="plugin_"+t;R[i]=n,L[i]=r,D[i]=o}),n()},r)}).then(function(t){return e.actions.scene.refresh().dispatch(),t})}function p(t){return new I.Promise(function(n,r){if(!t||!t.length)return n();var o=t.reduce(function(t,n){return e.flowManager.addFlowMap(n),n.nodes.forEach(function(e){var n=v(e._nodeKey)||e.ignore,r="module."+e._nodeKey;n||t.indexOf(r)!==-1||t.push(r)}),t},[]);if(!o.length)return n();var i=o.map(function(t){var n=c["default"].publicUrl+t+".js";return(0,d.load)(t,n).then(function(t){return t(e.$container,e.config)},function(t){e.api.log({message:"loadModule Failed: "+JSON.stringify(t),cyType:"Script",filter:1})})});return I.Promise.all(i).then(function(e){e.forEach(function(e){var t=e.nodeType,n=e.theme,r=e.component,o=t+"."+n;N[o]=r}),n()},r)}).then(function(t){return e.actions.scene.refresh().dispatch(),t})}function v(e){return N[e]}function y(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(t&&t.length){var r=O(n),o=t.filter(function(e){return e.type===("LIVE_FLOW"===r?1:0)});if(!o.length)return void console.warn("注册的热点数据类型不匹配",t,r);p(n),o.forEach(e.flowManager.addFlow),e.actions.scene.refresh(r).dispatchAsync()}}function _(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TIME_FLOW",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&t.length&&(t.forEach(function(t){var n=(0,f.isPlainObject)(t)?t._id:t;n&&e.flowManager.removeFlow(n,r)}),e.actions.scene.refresh(n).dispatchAsync())}function w(t){return t?e.flowManager.getFlow(t):null}function O(e){var t=l.find(e,function(e){return l.find(e.nodes,function(e){return l.find(e.portOut,function(e){return"LIVE_TIME"===e.portType})})});return t?"LIVE_FLOW":"TIME_FLOW"}function S(){U.dispatch(b.scene.play())}function M(){U.dispatch(b.scene.pause())}function P(){U.dispatch(b.scene.stop())}function A(e){U.dispatch(b.scene.setTime(e))}function C(){if(e.rootId){var t=document.getElementById(e.rootId);if(t){var n={zIndex:f.zIndexForFullscreen},r={maxHeight:"none",maxWidth:"none",height:"100%",width:"100%",margin:0,top:0,left:0,right:0,bottom:0};j.root=Object.keys(n).reduce(function(e,n){return e[n]=t.style[n],e},{}),j.container=Object.keys(r).reduce(function(t,n){return t[n]=e.$container.style[n],t},{}),l.assign(t.style,n),l.assign(e.$container.style,r);var o=(0,f.getFullscreenChangeEvent)();document.removeEventListener(o,x),document.addEventListener(o,x)}}}function x(){if(e.rootId&&!(0,f.isFullscreen)()){var t=document.getElementById(e.rootId);t&&(document.removeEventListener((0,f.getFullscreenChangeEvent)(),x),l.assign(t.style,j.root),l.assign(e.$container.style,j.container),j.root=j.container=null)}}var j={container:null,root:null},N={},D={},L={scene:{currentTime:0,activeNodes:[],activeAds:[],hookState:{backdrop:!1,layerMode:!1,playerPause:!1,playerBlur:!1},isShowHidden:!1,isPlaying:!1,activePlugin:null},toasts:{}},R={scene:g["default"],toasts:m["default"]},U=(0,h["default"])(t,T);return{bootstrap:n,destroy:r,getStore:o,getDisplayingNodes:i,registerPlugins:u,setActivePlugin:a,registerModules:p,registerFlows:y,removeFlows:_,getModule:v,getFlow:w,onPlay:S,onPause:M,onStop:P,onSetTime:A,onFullscreen:C,onExitFullscreen:x}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t["default"]=i;var a=n(8),c=o(a),u=n(9),l=r(u),f=n(4),d=n(43),p=n(181),h=o(p),v=n(179),g=o(v),y=n(180),m=o(y),_=n(143),b=r(_),w=n(176),T=r(w),O=n(170),E=r(O),I=n(28),k=n(5)("runner")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(178);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n(177);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;var o=n(8),i=r(o),s=n(4),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return"color: "+e+"; font-weight: "+t+";"},c=t.logger=function(e){return function(t){return function(n){if(!n)return null;if(!i["default"].debug||n.meta&&n.meta.ignoreLog)return t(n);var r=(new Date).toTimeString().split(" ")[0];(0,s.groupStartLog)(n.type);var o=e.getState();console.log("%c prev state ",a("#9E9E9E",800),(0,s.clone)(o)),console.log("%c action("+r+") ",a("#03A9F4"),n);var c=t(n),u=e.getState();return console.log("%c next state ",a("#4CAF50",800),(0,s.clone)(u)),(0,s.groupEndLog)(n.type),c}}};t["default"]=c},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.readyStatePromise=void 0;var o=n(9),i=r(o);t.readyStatePromise=function(e){return function(e){return function(t){function n(e,n){var r=i.assign({},t,{ready:e},n);return delete r.promise,r}return t.promise?(e(n(!1)),t.promise.then(function(t){return e(n(!0,{result:t}))},function(t){return e(n(!0,{error:t}))})):e(t)}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e){e.__videoTimer&&(b("resetVideoTimer...",e.__videoTimer),clearInterval(e.__videoTimer),e.__videoTimer=null)}function c(e,t){var n="normal"===t.config.mode&&t.player&&t.player.isPlaying(),r=t.__videoTimer;if(!n)return void a(t);if(!r){var o=1e3/t.config.fps;t.__videoTimer=setInterval(function(){if(!t.player)return void a(t);var n=t.player.getTime();e.currentTime!==n&&t.actions.scene.updateTime(n).dispatch()},o),b("startVideoTimer...",t.__videoTimer)}}function u(e,t){l(t);var n=Date.now(),r=e.activeNodes.filter(function(e){return!e.keepActive&&(0,v.isNumeric)(e.liveTime)&&(0,v.isNumeric)(e.activeTime)}).map(function(e){return Math.max(e.activeTime+e.liveTime-n,0)});r.length&&(t.__liveTimer=setTimeout(function(){t.actions.scene.refresh("LIVE_FLOW").dispatchAsync()},Math.min.apply(Math,s(r).concat([2147483647]))))}function l(e){e.__liveTimer&&(clearInterval(e.__liveTimer),e.__liveTimer=null)}function f(e,t){if(t.player){e.activeAds=t.adManager.getNewActiveAds(e.activeAds,e.currentTime),e.activeNodes=t.flowManager.getNewActiveNodes(e.activeNodes,e.currentTime);var n=e.hookState,r=e.activeNodes.filter(function(e){return!e.isDirty}).reduce(function(e,t){var n=t._state.hookState||{},r=Object.keys(n).reduce(function(e,t){return n[t]&&(e[t]=n[t]),e},{});return h.assign(e,r)},{backdrop:Boolean(e.vmall),layerMode:Boolean(e.vmall),playerPause:Boolean(e.vmall),playerBlur:!1});r.playerPause!==n.playerPause&&(r.playerPause?e.isPlaying&&(e.isPaused=!0,setTimeout(t.player.pause)):e.isPaused&&(e.isPaused=void 0,setTimeout(t.player.play))),r.playerBlur!==n.playerBlur&&(r.playerBlur?t.player.blur(22):t.player.blur(0)),e.hookState=r}}Object.defineProperty(t,"__esModule",{value:!0});var d,p=n(9),h=o(p),v=n(4),g=n(8),y=r(g),m=n(10),_=r(m),b=n(5)("rd.scene"),w=y["default"].trackCategory,T=w.videoPlay,O=w.videoPause,E=w.videoDrag,I=w.nodeJump,k=(d={},i(d,"PLAY",function(e,t,n){return c(e,n),e.isPlaying||n.api.track({cat:T}),e.isPlaying=!0,e}),i(d,"PAUSE",function(e,t,n){return a(n),e.isPlaying&&n.api.track({cat:O}),e.isPlaying=!1,e}),i(d,"UPDATE_TIME",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2];if(!n.player)return e;var r=n.player.getTotalTime();if(r>1e3&&t>=r)return b("reach the end of timeline,should switch to next scenes or stop"),a(n),e.currentTime=r,e.isPlaying=!1,n.emitter.emit("PLAY_TIME_UPDATE",null,!0),e;var o=t-e.currentTime;return Math.abs(o)>3e3&&n.api.track({cat:E,x:Math.round(e.currentTime),y:Math.round(t)}),e.currentTime=t,n.emitter.emit("PLAY_TIME_UPDATE",null,!0),f(e,n),e}),i(d,"REFRESH",function(e,t,n){if(!n.player)return e;if(c(e,n),!t)return e;if(f(e,n),u(e,n),"TIME_FLOW"===t&&n.player.insertDots){var r=n.flowManager.getNodes().filter(function(e){return(0,v.isNumeric)(e.inTime)}).map(function(e){return{id:e._id,intro:e.nodeData.title||"",time:e.inTime}});n.player.insertDots(r)}return e}),i(d,"STOP",function(e,t,n){return a(n),e.currentTime=0,e.isPlaying=!1,n.emitter.emit("PLAY_TIME_UPDATE",null,!0),e}),i(d,"DESTROY",function(e,t,n){return a(n),l(n),e}),i(d,"WAIT",function(e,t,n){return a(n),e}),i(d,"SHOW_HIDDEN",function(e){return e.isShowHidden=!0,e}),i(d,"HIDE_HIDDEN",function(e){return e.isShowHidden=!1,e}),i(d,"TRIGGER_NEXT",function(e,t,n){var r=t.currentNode,o=t.slot,i=t.portData,s=n.flowManager.triggerNextNode(r,o);if(s){var a=_["default"].get("ports")||{};s.portInData||(s.portInData=a[s._id]||[]),void 0!==i&&(s.portInData=s.portInData.filter(function(e){return e!==i}).concat([i]),a[s._id]=s.portInData,_["default"].set("ports",a)),n.api.track({cat:I,x:r._flowId,y:s._resourceId})}return f(e,n),e}),i(d,"SET_ACTIVE_PLUGIN",function(e,t){return e.activePlugin=t,e}),d);t["default"]=k},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4);t["default"]={SHOW_TOAST:function(e,t){var n=t.type,o=t.option,i="string"==typeof o?{message:o}:o,s=i.id,a=void 0===s?(0,r.uid)():s,c=i.message,u=i.timeout,l=void 0===u?3e3:u;return e[a]={id:a,type:n,message:c,timeout:l},e},REMOVE_TOAST:function(e,t){var n=t.id;return delete e[n],e}}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){function n(e){(0,i.assert)("function"==typeof e,"subscribe: listener must be an function"),c.push(e);var t=!0;return function(){if(t){t=!1;var n=c.indexOf(e);c.splice(n,1)}}}function o(){c.length=0,l=!0}function a(t){if(l)return t;(0,i.assert)((0,i.isPlainObject)(t),"action must be an plain object, use custom middleware for async actions"),(0,i.assert)("undefined"!=typeof t.type,'action must have an "type" property, have you misspelled a constant?'),(0,i.assert)(!f,"reducer may not dispatch actions");try{f=!0,u=e(u,t)}catch(n){throw n}finally{f=!1}return c.slice().forEach(function(e){return e(u)}),t}(0,i.assert)("function"==typeof e,"reducer must be an function");var c=[],u={},l=!1,f=!1;a({type:s.INIT});var d={getState:function(){return u},dispatch:a},p=function(e){return"function"==typeof e.getValue?e.getValue():e},h=Object.keys(t).map(function(e){return t[e](d)}),v=function(e){l||(e=p(e),i.compose.apply(void 0,r(h))(a)(e))},g=function(e,t){return setTimeout(function(){return v(e)},t)},y=function m(e){return Object.keys(e).reduce(function(t,n){var r=e[n];return"function"==typeof r?t[n]=function(){var e=r.apply(void 0,arguments);return{getValue:function(){return e},dispatch:function(){return v(e)},dispatchAsync:function(t){return g(e,t)}}}:t[n]=m(r),t},{})};return{getState:d.getState,dispatch:v,dispatchAsync:g,subscribe:n,destroy:o,bindActions:y}}Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes=void 0,t["default"]=o;var i=n(4),s=t.ActionTypes={INIT:"@cytron-platform/INIT"}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.encode=t.errorMessages=void 0;var i=n(9),s=r(i),a=function(e,t){var n=s.find(Object.keys(e),function(e){return t.indexOf(e)!==-1});return e[n]};t.errorMessages=function(e,t){if(t=t||"",403===e){var n=o({},"no power ak","请确保您的appkey正确且被加入白名单");return a(n,t)||"您的操作没有权限哦("+t+")~"}return 401===e?"请先登录您的账号~":404===e?"抱歉，您访问的接口找不到了~":t||"未知错误"},t.encode=function(e){return window.btoa(unescape(encodeURIComponent(e)))}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var a=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(c){o=!0,i=c}finally{try{!r&&a["return"]&&a["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(8),l=o(u),f=n(4),d=n(42),p=r(d),h=n(182),v=n(184),g=o(v),y=n(10),m=o(y),_=n(5)("api"),b=".*videojj.com/.*track.*/va.gif?.*",w=function T(e,t){var n=this;s(this,T);var r={cyApiAddress:e.apiAddress||l["default"].apiAddress,meApiAddress:e.meAddress||e.meApiAddress||l["default"].meApiAddress,vaApiAddress:e.vaAddress||e.vaApiAddress||l["default"].vaApiAddress,authApiAddress:e.authAddress||e.authApiAddress||l["default"].authApiAddress,adApiAddress:e.adAddress||e.adApiAddress||l["default"].adApiAddress,logApiAddress:e.logAddress||e.logApiAddress||l["default"].logApiAddress,referer:e.referer},o=function(e,n){e=e||{};var o=e.cat||{},s=e.s||l["default"].serviceType;return c(i({cat:"",s:"",ver:1,n:Math.floor(1e8*Math.random()),ch:t.getChannel()||"",proj:t.getProject()||"",br:t.getBrand()||"",rs:t.getDPI(),lang:navigator.language||navigator.userLanguage,dr:e.dr||0,y:e.y||0,x:e.x||0,ext:e.ext,sdk:l["default"].version,bu:"videoos"},"bu-ser",r.serverVersion),e,n?{vid:t.getVideoId()||"",client:t.getIdentity()||"",pcid:e.pcid||"",ptid:e.ptid||"",tid:e.tid||"",cid:e.cid||"",appkey:t.getAppkey()}:{a:t.getAppkey(),v:t.getVideoId()||"",c:t.getIdentity()||""},{cat:o.value||"",s:s.value||""})},u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new RegExp(b,"gi").test(e),i=o(t,n);if(r){var s=f.query.parse(e),a=Object.keys(s).reduce(function(e,t){return s[t]&&(e[t]=s[t]),e},i),c=e.replace(/\?.*/g,"");return f.query.append(c,a)}return e},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e){if("local"===l["default"].version&&l["default"].debug)return void _("doTrack debug "+t,f.query.parse(e));var n=new Image(1,1);n.onload=n.onerror=function(){_("doTrack done "+t+"("+e+")")},n.src=e}},v=function(e){var n=t.getToken(),o=e||{Appkey:(0,h.encode)(t.getAppkey()),Authorization:n?"Bearer "+n:"","Auth-App-Store":t.getAppStoreToken()||"",IP:t.getIp()||"",Identity:t.getIdentity(),"Content-Type":"application/json",Referer2:r.referrer||location.href||"","SDK-Version":l["default"].version||"","BU-Id":"videoos","Bu-Service-Version":r.serverVersion||"","3rd-Platform-Id":t.getProject()||"",Lang:navigator.language||navigator.userLanguage};return{headers:o}},y=["jsonp","head","patch","get","post","put","delete"].reduce(function(e,t){
return e[t]=function(e,n,o,i){var s=f.request.mkReqUrl(e,r.cyApiAddress);return f.request["$"+t](s,n,v(o),i).then(function(e){var t=e&&e.data,n={data:t&&(t.data||t.msg)||t,status:t&&t.status||200,request:e&&e.request};return 200!==n.status?Promise.reject(c({},n,{message:(0,h.errorMessages)(status,t.msg)})):n})["catch"](function(e){return Promise.reject(c({},e,{message:(0,h.errorMessages)(e.status,e.message)}))})},e},{});this.setup=function(){var e=new Promise(function(e,t){return m["default"].get("uid")?void e(m["default"].get("uid")):void y.jsonp("/client/getUid").then(function(t){var n=t.data;m["default"].set("uid",n),e(n)},t)});return Promise.all([e,y.jsonp(r.authApiAddress+"/jsonp/getCookie.js").then(function(e){return e.data||{}})]).then(function(e){var n=a(e,2),r=n[0],o=n[1];return t.setIdentity(r),t.setIp(o.ip),o.token?(t.setToken(o.token),y.get("/user/currentUser").then(function(e){var n=e.data;t.setPower(n.power),t.setRefer(n.refer),t.setUserAgent(n.userAgent),t.setRole(n.role),t.setUsername(n.username),t.setEmail(n.email),n.ip&&t.setIp(n.ip)})):o})["catch"](function(e){n.log({message:"getUserInfo Failed: "+JSON.stringify(e),cyType:"API",filter:0}),t.setToken(""),Promise.resolve({})})},this.getVideoConfigs=function(e,o){if(p.notSupport)return Promise.resolve({});if(!e)return console.warn("getVideoConfig Failed: url不能为空",o),Promise.resolve({});if(e.length>900)return console.warn("getVideoConfig Failed: url长度超过限制900",o,e),Promise.resolve({});var i={local:1,title:o,url:(0,h.encode)(e),appkey:(0,h.encode)(t.getAppkey())},s=Date.now();return y.post("/video",i,null,2).then(function(e){var o=e.retry,i=e.data;return o&&n.log({message:"getVideoConfig Success: "+JSON.stringify({retry:o,request:e.request}),cyType:"API",level:"debug"}),r.trackTmpl=i.trackTmpl,r.serverVersion=i.apiVersion,t.setVideoId(i.videoId),t.setAppStoreToken(i.appStoreToken),t.setChannel(i.channel),t.setBrand(i.brand),t.setProject(i.project),t.setCategories(i.categories),t.setProjectType(i.type),t.setOffsetTime(s-i.currentTime),c({},i.config,{adSummaryEnable:i.enabledAd,mallEnable:i.hasShelf,pushEnable:i.hasPushData,videoDataUrl:i.videoDataUrl})})["catch"](function(e){var t=e&&e.status;return 403!==t&&n.log({message:"getVideoConfig Failed: "+JSON.stringify(e),cyType:"API"}),Promise.resolve({})})},this.getVideoData=function(e){if(p.notSupport)return Promise.resolve({});var r=(0,f.isEmpty)(e),o=r?{v:t.getVideoId(),appkey:(0,h.encode)(t.getAppkey())}:null,i=(e||"/flow").replace(/(https:|http:)/g,"");return t.isReady()?y.get(i,o,!r&&{},1).then(function(e){var t=e.data,r=e.retry;return r&&n.log({message:"getVideoData Success: "+JSON.stringify({retry:r,request:e.request}),cyType:"API",level:"info"}),t})["catch"](function(e){return n.log({message:"getVideoData Failed: "+JSON.stringify(e),cyType:"API"}),Promise.resolve({})}):(console.warn("getVideoData Failed: session数据缺少videoId"),Promise.resolve({}))},this.getGlobalData=function(){if(p.notSupport)return Promise.resolve({});if(!t.isReady())return console.warn("getGlobalData Failed: session 数据缺少 videoId"),Promise.resolve({});var e={project:t.getProject(),channel:t.getChannel(),appkey:(0,h.encode)(t.getAppkey())};return y.get("/flow/global",e,null,1).then(function(e){return e.data})["catch"](function(e){n.log({message:"getGlobalData Failed: "+JSON.stringify(e),cyType:"API"}),Promise.resolve({})})},this.getAdSummary=function(){if(p.notSupport)return Promise.resolve({});if(!t.isReady())return console.warn("getAdSummary Failed: session 数据缺少 videoId"),Promise.resolve({});if(_("getAdSummary...",r),!r.adApiAddress)return Promise.resolve([]);var e=c({},o(),{videoId:t.getVideoId(),projectId:t.getProject(),channelId:t.getChannel(),brandId:t.getBrand(),clientId:t.getClientId(),categoryId:t.getCategories().join(","),appkey:(0,h.encode)(t.getAppkey())});return y.get(r.adApiAddress+"/server/summary",e).then(function(e){return d(u(e.data.track),"AdSummary"),e.data.ads})["catch"](function(){return Promise.resolve([])})},this.getAdDetail=function(e){return p.notSupport?Promise.resolve({}):y.get(u(e)).then(function(e){var t=e.data,n=t.ad,r=t.flowMaps,o=t.flows,i=t.track;return d(u(i),"AdDetail"),{_id:n._id,frequency:n.frequency,title:n.title,flowMaps:r,flows:o}})["catch"](function(){return Promise.resolve({})})},this.mqttNotify=function(){if(p.notSupport)return Promise.resolve({});if(!t.isReady())return console.warn("mqttNotify Failed: session 数据缺少 videoId"),Promise.resolve({});var e={videoId:t.getVideoId(),project:t.getProject(),clientId:t.getClientId(),channel:t.getChannel(),appkey:(0,h.encode)(t.getAppkey())};return y.get("/mqtt",e).then(function(e){return e.data})},this.monitor=function(e){var t=e.name,n=e.type,r=e.url;d(u(r),"monitor:"+n+":"+t)},this.track=function(e){if(t.getDPI()){var n=e&&e.cat||{},i=e&&e.s||l["default"].serviceType,s=i.alias+":"+n.alias+"("+i.value+":"+n.value+")";if(!t.getProject()||!t.getVideoId())return void console.warn("track va.gif:"+s+" 数据缺失");var a=o(e),c=f.query.append(r.vaApiAddress+"/track/va.gif",a);d(c,"va.gif:"+s)}},this.trackV2={show:function(e){return n.__track(c({},e,{cat:{alias:"曝光",value:12}}))},click:function(e){return n.__track(c({},e,{cat:{alias:"点击",value:9}}))},close:function(e){return n.__track(c({},e,{cat:{alias:"关闭",value:20}}))},hover:function(e){return n.__track(c({},e,{cat:{alias:"Hover",value:21}}))}},this.__track=function(e){if(t.getDPI()){var n=e&&e.cat||{},o=e&&e.s||l["default"].serviceType,i=o.alias+":"+n.alias+"("+(e.tid||"")+" ~ "+(e.cid||"")+")";if(!t.getProject()||!t.getVideoId())return void console.warn("track va.gif:"+i+" 数据缺失");var s=u(r.trackTmpl||"",e,!0);d(s,"v2:"+i)}},this.ajax=y;var w=new g["default"]({session:t,delay:3e3,post:y.post,url:r.logApiAddress+"/log",maxSize:10,ignore:function(e,t,n){return!!p.isSpider||!e&&t.indexOf("cytroncdn")===-1||!!/Cytron Error|Player Error|Script Error|player.venvy.js|无效字符/gi.test(n)}});this.log=w.message,this.destroy=function(){w.destroy()}};t["default"]=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var i=n(8),s=r(i),a=n(4),c=n(5)("logger"),u=function l(e){var t=e.session,n=e.delay,r=e.post,i=e.url,u=e.maxSize,f=e.ignore;o(this,l);var d=[],p=[],h=(0,a.debounce)(n)(function(){var e=p.slice();if("local"===s["default"].version&&s["default"].debug)return console.error("Post Logs Debug: ",e),void(p.length=0);var t=JSON.stringify(e);r(i,{info:t,decrypt:!1}).then(function(){c("Post Log Success ",e),p.length=0})["catch"](function(e){c("Post Log Failed ",e)})});this.message=function(e){var n=e&&e.filename||"",r=e&&e.level||"error",o=e&&e.lineno||"",i=e&&e.colno||"",l=e&&e.cyType||"",v=e&&e.error&&e.error.stack||"",g=""+(e&&e.message||"未知错误")+(n?", file: "+n+"("+o+":"+i+")":""),y=e&&e.filter;c("%c"+r+": "+g,"color: red",e);var m=g+" "+l+" "+r+" "+n;if(!f(l,n,g+v)&&!((0,a.isNumeric)(y)&&y<1&&Math.random()>y||p.length>=u||d.indexOf(m)!==-1)){d.push(m);var _=t.getDPI(),b=t.getVideoId();p.push({level:r,message:g+(v?", stack: "+v:""),tag:"H5@"+s["default"].version+"."+s["default"].commit+", no="+d.length+", video="+b+", dpi="+_+", type="+(l||"Uncaught")+", filter="+y}),h()}},this.destroy=function(){return h.cancel()}};t["default"]=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){if(window.__CYTRON_INITED__){var e=window.__CYTRON_INITED__,t=e.parent,n=e.config;delete window.__CYTRON_INITED__;var r=new Iva(t,n);window.__CYTRON_DESTROY__=function(){return r.destroy()}}window.__IVA_HOLDER__&&(Object.keys(window.__IVA_HOLDER__).forEach(function(e){var t=window.__IVA_HOLDER__[e],n=t.parent,r=t.config,o=t.instance,i=void 0===o?{}:o,s=new Iva(n,r);i.destroy=function(){s.destroy()}}),delete window.__IVA_HOLDER__)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var i=n(4),s=n(8),a=r(s),c=n(187),u=r(c),l=n(274),f=n(5)("mqtt"),d=a["default"].useSwfMqtt||"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&navigator.appVersion.indexOf("Trident")>-1||navigator.userAgent.indexOf("Edge/")>-1,p=function h(e){var t=this;o(this,h);var n=e.parent,r=e.clientId,s=e.videoId,c=e.channelId,p=e.projectId,v=e.autoConnect,g=0===location.href.indexOf("https"),y="post-cn-45908b8cn07.mqtt.aliyuncs.com",m=g?443:80,_=[a["default"].mqttPrefix+"/site",a["default"].mqttPrefix+"/p2p",a["default"].mqttPrefix+"/project/"+p,a["default"].mqttPrefix+"/channels/"+c,a["default"].mqttPrefix+"/"+s],b=[],w={},T={},O=10,E="",I=0,k=null,S=null,M=e.onConnect,P=d?new u["default"](n,y,r):new l.MQTT.Client(y,m,r),A={useSSL:g,userName:"CSwtMsBf6OXprzjS",password:"+NzaZi/0UHxnB7mNWe/wbT1gl6Q=",onSuccess:function(){return"disconnect"===E?void P.disconnect():(f("onConnected",P.isConnected(),_,b),_.forEach(P.subscribe),b.forEach(P.subscribe),E="connected",void((0,i.isFunction)(M)&&M()))}};P.onConnectionLost=function(e){clearTimeout(S),clearTimeout(k),"disconnect"!==E&&(f("onConnectionLost"),I<=O?k=setTimeout(function(){return t.connect(!0)},1e3):f("Reconnect Failed",e))},P.onMessageArrived=function(e){try{var t=JSON.parse(e.payloadString),n=t.msg,r=t.type;f("onMessageArrived",r,n),T[r]=n,Object.keys(w[r]||{}).forEach(function(e){var t=w[r][e];(0,i.isFunction)(t)&&t(n)})}catch(o){f(o)}},a["default"].debug&&(this.__mqtt=P),this.connect=function(e){f("Connect...",E),E="connecting",clearTimeout(k),clearTimeout(S),P.isConnected()||(e?(I+=1,f("Reconnecting... "+I+" time",A)):(I=0,f("Connecting...",A)),d&&P.disconnect(),P.connect(A))},this.disconnect=function(){f("Disconnect...",E);var e=E;E="disconnect","connected"===e&&(_.forEach(P.unsubscribe),b.forEach(P.unsubscribe),P.disconnect()),b.length=0},this.subscribe=function(e){f("Subscribe",e),b.push(e),"connected"===E&&P.subscribe(e)},this.unsubscribe=function(e){P.unsubscribe(e)},this.setMsgListener=function(e,t){w[e]||(w[e]={}),w[e][t]=t;var n=T[e];n&&(0,i.isFunction)(t)&&t(n)},this.getState=function(){return E},this.getMessages=function(){return(0,i.copy)(T)},this.clearMsgListener=function(e,t){w[e]||(w[e]={}),delete w[e][t]};try{v&&this.connect()}catch(C){throw console.error("MQTT连接失败",C),C}};t["default"]=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var i=n(8),s=r(i),a=(n(5)("swf-mqtt"),s["default"].assertsUrl+"/mqtt_v0314.swf"),c='\n  <object\n    id="cytron-mqtt-swf"\n    data="'+a+'"\n    type="application/x-shockwave-flash"\n    style="width:0; height:0;"\n  >\n    <param name="allowScriptAccess" value="always" />\n    <param name="allowInsecureDomain" value="*" />\n    <param name="allowDomain" value="*" />\n  </object>\n',u=function(e){var t=document.createElement("div");return t.innerHTML=c,t.id="cytron-mqtt-wrapper",e.appendChild(t),document.getElementById("cytron-mqtt-swf")},l=function f(e,t,n){var r=this;o(this,f);var i=u(e),s=null,a=!1;this.subscribe=function(e){"function"==typeof i.subscribe&&i.subscribe(e)},this.unsubscribe=function(e){"function"==typeof i.unsubscribe&&i.unsubscribe(e)},this.connect=function(o){return clearTimeout(s),s=null,i||(i=u(e)),i.connect?(i.connect({username:o.userName,password:o.password,clientid:n,host:t,port:1883,tname:"videojj"}),window.onMqttConnected=function(){a=!0,o.onSuccess&&o.onSuccess()},window.onMqttMessageArrived=function(e){var t=e.match(/(\w|\/|@)+:/)[0];r.onMessageArrived&&r.onMessageArrived({destinationName:t.substr(0,t.length-1),payloadString:e.replace(t,"").replace("\n","<br>")})},void(window.onMqttConnectionLost=function(e){a=!1,r.onConnectionLost&&r.onConnectionLost(e)})):void(s=setTimeout(function(){return r.connect(o)},300))},this.disconnect=function(){if(clearTimeout(s),a=!1,s=null,delete window.onMqttConnected,delete window.onMqttMessageArrived,delete window.onMqttConnectionLost,i){i.disconnect&&i.disconnect();var e=i.parentElement;e.parentElement.removeChild(e),i=null}},this.isConnected=function(){return!s&&a}};t["default"]=l},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var i=n(9),s=r(i),a=(n(5)("session"),function c(e,t){var n=this;o(this,c);var r={};this.update=function(e){return s.assign(r,e)},this.setToken=function(e){return r.token=e},this.setAppkey=function(e){return r.appkey=e},this.setVideoId=function(e){return r.videoId=e},this.setPower=function(e){return r.power=e},this.setAppStoreToken=function(e){return r.appStoreToken=e},this.setProject=function(e){return r.project=e},this.setChannel=function(e){return r.channel=e},this.setBrand=function(e){return r.brand=e},this.setCategories=function(e){return r.categories=e},this.setIp=function(e){return r.ip=e},this.setUserAgent=function(e){return r.userAgent=e},this.setUsername=function(e){return r.username=e},this.setEmail=function(e){return r.email=e},this.setRefer=function(e){return r.refer=e},this.setDPI=function(e){var t=e.height,r=e.width;return n.update({height:t,width:r})},this.setIdentity=function(e){return r.identity=e},this.setRole=function(e){return r.role=e},this.setProjectType=function(e){return r.projectType=e},this.setOffsetTime=function(e){return r.offsetTime=e},this.getToken=function(){return r.token},this.getVideoId=function(){return r.videoId},this.getAppkey=function(){return r.appkey},this.getIdentity=function(){return r.identity||""},this.getClientId=function(){return"CID_H5@@@"+r.identity},this.getAppStoreToken=function(){return r.appStoreToken},this.getProject=function(){return r.project},this.getChannel=function(){return r.channel},this.getBrand=function(){return r.brand},this.getCategories=function(){return r.categories||[]},this.getIp=function(){return r.ip},this.getUserAgent=function(){return r.userAgent},this.getUserInfo=function(){return r.username?(r.username||"")+" <"+(r.email||"")+">":""},this.getRefer=function(){return r.refer},this.getDPI=function(){return Math.round(r.width)+"x"+Math.round(r.height)},this.getHeight=function(){return r.height||0},this.getWidth=function(){return r.width||0},this.getRole=function(){return r.role},this.getProjectType=function(){return r.projectType},this.getOffsetTime=function(){return r.offsetTime||0},this.now=function(){return Date.now()-n.getOffsetTime()},this.isReady=function(){return r.videoId&&r.project},this.isEditable=function(){var e=r.power||"000000";return"1"===e.charAt(5)||"1"===e.charAt(1)},this.setAppkey(e.appkey),this.setDPI(t.getBoundingClientRect())});t["default"]=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){var t=e.playerUrl||d["default"].publicUrl+"player."+(e.player||d["default"].player||"venvy")+".js";return(0,p.load)("player",t)}function i(e,t){return e.setup().then(function(){return g("=====> Loading Video Configs..."),e.getVideoConfigs(t.video,t.title)}).then(function(e){return g("=====> Video Configs Loaded..."),e})}function s(e){var t=Date.now();window.onfocus=function(){e.track({cat:d["default"].trackCategory.videoFocus,dr:Date.now()-t}),t=Date.now()},window.onblur=function(){e.track({cat:d["default"].trackCategory.videoBlur,dr:Date.now()-t}),t=Date.now()},window.onbeforeunload=function(){e.track({cat:d["default"].trackCategory.videoClose})}}function a(){window.onfocus=window.onblur=window.onbeforeunload=void 0}function c(e){var t=(0,h.getElement)(e);return(0,h.assert)(t,e+"容器未找到"),t}function u(e){var t=v.notSupport||e.disabled||d["default"].disabled;return(0,h.assert)(e.appkey&&e.video,"缺少config必要字段，请确保您的config包含appkey, video"),l({},e,{fps:e.fps||d["default"].fps,title:(e.title||document.title||"").substring(0,100),mode:t?"":v.isMobile?"mobile":"normal",disabled:t})}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.loadPlayerModule=o,t.loadVideoConfig=i,t.startWindowTrack=s,t.stopWindowTrack=a,t.getContainer=c,t.getConfig=u;var f=n(8),d=r(f),p=n(43),h=n(4),v=n(42),g=n(5)("core.starter")},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=window.Paho;"undefined"==typeof r&&(r={}),r.MQTT=function(e){function t(e,t){var n=t,o=e[t],i=o>>4,a=o&=15;t+=1;var c,u=0,f=1;do{if(t==e.length)return[null,n];c=e[t++],u+=(127&c)*f,f*=128}while(0!=(128&c));var p=t+u;if(p>e.length)return[null,n];var h=new b(i);switch(i){case d.CONNACK:var v=e[t++];1&v&&(h.sessionPresent=!0),h.returnCode=e[t++];break;case d.PUBLISH:var g=a>>1&3,y=s(e,t);t+=2;var m=l(e,t,y);t+=y,g>0&&(h.messageIdentifier=s(e,t),t+=2);var _=new r.MQTT.Message(e.subarray(t,p));1==(1&a)&&(_.retained=!0),8==(8&a)&&(_.duplicate=!0),_.qos=g,_.destinationName=m,h.payloadMessage=_;break;case d.PUBACK:case d.PUBREC:case d.PUBREL:case d.PUBCOMP:case d.UNSUBACK:h.messageIdentifier=s(e,t);break;case d.SUBACK:h.messageIdentifier=s(e,t),t+=2,h.returnCode=e.subarray(t,p)}return[h,p]}function o(e,t,n){return t[n++]=e>>8,t[n++]=e%256,n}function i(e,t,n,r){return r=o(t,n,r),u(e,n,r),r+t}function s(e,t){return 256*e[t]+e[t+1]}function a(e){var t=new Array(1),n=0;do{var r=e%128;e>>=7,e>0&&(r|=128),t[n++]=r}while(e>0&&n<4);return t}function c(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r>2047?(55296<=r&&r<=56319&&(n++,t++),t+=3):r>127?t+=2:t++}return t}function u(e,t,n){for(var r=n,o=0;o<e.length;o++){var i=e.charCodeAt(o);if(55296<=i&&i<=56319){var s=e.charCodeAt(++o);if(isNaN(s))throw new Error(y(v.MALFORMED_UNICODE,[i,s]));i=(i-55296<<10)+(s-56320)+65536}i<=127?t[r++]=i:i<=2047?(t[r++]=i>>6&31|192,t[r++]=63&i|128):i<=65535?(t[r++]=i>>12&15|224,t[r++]=i>>6&63|128,t[r++]=63&i|128):(t[r++]=i>>18&7|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=63&i|128)}return t}function l(e,t,n){for(var r,o="",i=t;i<t+n;){var s=e[i++];if(s<128)r=s;else{var a=e[i++]-128;if(a<0)throw new Error(y(v.MALFORMED_UTF,[s.toString(16),a.toString(16),""]));if(s<224)r=64*(s-192)+a;else{var c=e[i++]-128;if(c<0)throw new Error(y(v.MALFORMED_UTF,[s.toString(16),a.toString(16),c.toString(16)]));if(s<240)r=4096*(s-224)+64*a+c;else{var u=e[i++]-128;if(u<0)throw new Error(y(v.MALFORMED_UTF,[s.toString(16),a.toString(16),c.toString(16),u.toString(16)]));if(!(s<248))throw new Error(y(v.MALFORMED_UTF,[s.toString(16),a.toString(16),c.toString(16),u.toString(16)]));r=262144*(s-240)+4096*a+64*c+u}}}r>65535&&(r-=65536,o+=String.fromCharCode(55296+(r>>10)),r=56320+(1023&r)),o+=String.fromCharCode(r)}return o}var f="@VERSION@",d={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},p=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){if(!t.hasOwnProperty(r)){var o="Unknown property, "+r+". Valid properties are:";for(var r in t)t.hasOwnProperty(r)&&(o=o+" "+r);throw new Error(o)}if(n(e[r])!==t[r])throw new Error(y(v.INVALID_TYPE,[n(e[r]),r]))}},h=function(e,t){return function(){return e.apply(t,arguments)}},v={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."}},g={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},y=function(e,t){var n=e.text;if(t)for(var r,o,i=0;i<t.length;i++)if(r="{"+i+"}",o=n.indexOf(r),o>0){var s=n.substring(0,o),a=n.substring(o+r.length);n=s+t[i]+a}return n},m=[0,6,77,81,73,115,100,112,3],_=[0,4,77,81,84,84,4],b=function(e,t){this.type=e;for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])};b.prototype.encode=function(){var e=(15&this.type)<<4,t=0,n=new Array,r=0;switch(void 0!=this.messageIdentifier&&(t+=2),this.type){case d.CONNECT:switch(this.mqttVersion){case 3:t+=m.length+3;break;case 4:t+=_.length+3}if(t+=c(this.clientId)+2,void 0!=this.willMessage){t+=c(this.willMessage.destinationName)+2;var s=this.willMessage.payloadBytes;s instanceof Uint8Array||(s=new Uint8Array(l)),t+=s.byteLength+2}void 0!=this.userName&&(t+=c(this.userName)+2),void 0!=this.password&&(t+=c(this.password)+2);break;case d.SUBSCRIBE:e|=2;for(var u=0;u<this.topics.length;u++)n[u]=c(this.topics[u]),t+=n[u]+2;t+=this.requestedQos.length;break;case d.UNSUBSCRIBE:e|=2;for(var u=0;u<this.topics.length;u++)n[u]=c(this.topics[u]),t+=n[u]+2;break;case d.PUBREL:e|=2;break;case d.PUBLISH:this.payloadMessage.duplicate&&(e|=8),e=e|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(e|=1),r=c(this.payloadMessage.destinationName),t+=r+2;var l=this.payloadMessage.payloadBytes;t+=l.byteLength,l instanceof ArrayBuffer?l=new Uint8Array(l):l instanceof Uint8Array||(l=new Uint8Array(l.buffer));break;case d.DISCONNECT:}var f=a(t),p=f.length+1,h=new ArrayBuffer(t+p),v=new Uint8Array(h);if(v[0]=e,v.set(f,1),this.type==d.PUBLISH)p=i(this.payloadMessage.destinationName,r,v,p);else if(this.type==d.CONNECT){switch(this.mqttVersion){case 3:v.set(m,p),p+=m.length;break;case 4:v.set(_,p),p+=_.length}var g=0;this.cleanSession&&(g=2),void 0!=this.willMessage&&(g|=4,g|=this.willMessage.qos<<3,this.willMessage.retained&&(g|=32)),void 0!=this.userName&&(g|=128),void 0!=this.password&&(g|=64),v[p++]=g,p=o(this.keepAliveInterval,v,p)}switch(void 0!=this.messageIdentifier&&(p=o(this.messageIdentifier,v,p)),this.type){case d.CONNECT:p=i(this.clientId,c(this.clientId),v,p),void 0!=this.willMessage&&(p=i(this.willMessage.destinationName,c(this.willMessage.destinationName),v,p),p=o(s.byteLength,v,p),v.set(s,p),p+=s.byteLength),void 0!=this.userName&&(p=i(this.userName,c(this.userName),v,p)),void 0!=this.password&&(p=i(this.password,c(this.password),v,p));break;case d.PUBLISH:v.set(l,p);break;case d.SUBSCRIBE:for(var u=0;u<this.topics.length;u++)p=i(this.topics[u],n[u],v,p),v[p++]=this.requestedQos[u];break;case d.UNSUBSCRIBE:for(var u=0;u<this.topics.length;u++)p=i(this.topics[u],n[u],v,p)}return h};var w=function(e,t,n){this._client=e,this._window=t,this._keepAliveInterval=1e3*n,this.isReset=!1;var r=new b(d.PINGREQ).encode(),o=function(e){return function(){return i.apply(e)}},i=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(r),this.timeout=this._window.setTimeout(o(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(v.PING_TIMEOUT.code,y(v.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,this._window.clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(o(this),this._keepAliveInterval))},this.cancel=function(){this._window.clearTimeout(this.timeout)}},T=function(e,t,n,r,o){this._window=t,n||(n=30);var i=function(e,t,n){return function(){return e.apply(t,n)}};this.timeout=setTimeout(i(r,e,o),1e3*n),this.cancel=function(){this._window.clearTimeout(this.timeout)}},O=function(t,n,r,o,i){if(!("WebSocket"in e&&null!==e.WebSocket))throw new Error(y(v.UNSUPPORTED,["WebSocket"]));if(!("localStorage"in e&&null!==e.localStorage))throw new Error(y(v.UNSUPPORTED,["localStorage"]));if(!("ArrayBuffer"in e&&null!==e.ArrayBuffer))throw new Error(y(v.UNSUPPORTED,["ArrayBuffer"]));this._trace("Paho.MQTT.Client",t,n,r,o,i),this.host=n,this.port=r,this.path=o,this.uri=t,this.clientId=i,this._localKey=n+":"+r+("/mqtt"!=o?":"+o:"")+":"+i+":",this._msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0;for(var s in localStorage)0!=s.indexOf("Sent:"+this._localKey)&&0!=s.indexOf("Received:"+this._localKey)||this.restore(s)};O.prototype.host,O.prototype.port,O.prototype.path,O.prototype.uri,O.prototype.clientId,O.prototype.socket,O.prototype.connected=!1,O.prototype.maxMessageIdentifier=65536,O.prototype.connectOptions,O.prototype.hostIndex,O.prototype.onConnectionLost,O.prototype.onMessageDelivered,O.prototype.onMessageArrived,O.prototype.traceFunction,O.prototype._msg_queue=null,O.prototype._connectTimeout,O.prototype.sendPinger=null,O.prototype.receivePinger=null,O.prototype.receiveBuffer=null,O.prototype._traceBuffer=null,O.prototype._MAX_TRACE_ENTRIES=100,O.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw new Error(y(v.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(y(v.INVALID_STATE,["already connected"]));this.connectOptions=e,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},O.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw new Error(y(v.INVALID_STATE,["not connected"]));var n=new b(d.SUBSCRIBE);n.topics=[e],void 0!=t.qos?n.requestedQos=[t.qos]:n.requestedQos=[0],t.onSuccess&&(n.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(n.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e})}),t.timeout&&(n.timeOut=new T(this,window,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:v.SUBSCRIBE_TIMEOUT.code,errorMessage:y(v.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},O.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw new Error(y(v.INVALID_STATE,["not connected"]));var n=new b(d.UNSUBSCRIBE);n.topics=[e],t.onSuccess&&(n.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(n.timeOut=new T(this,window,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:v.UNSUBSCRIBE_TIMEOUT.code,errorMessage:y(v.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},O.prototype.send=function(e){if(this._trace("Client.send",e),!this.connected)throw new Error(y(v.INVALID_STATE,["not connected"]));var t=new b(d.PUBLISH);t.payloadMessage=e,e.qos>0?this._requires_ack(t):this.onMessageDelivered&&(this._notify_msg_sent[t]=this.onMessageDelivered(t.payloadMessage)),this._schedule_message(t)},O.prototype.disconnect=function(){if(this._trace("Client.disconnect"),!this.socket)throw new Error(y(v.INVALID_STATE,["not connecting or connected"]));var e=new b(d.DISCONNECT);this._notify_msg_sent[e]=h(this._disconnected,this),this._schedule_message(e)},O.prototype.getTraceLog=function(){if(null!==this._traceBuffer){this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length);for(var e in this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},O.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,f)},O.prototype.stopTrace=function(){delete this._traceBuffer},O.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=h(this._on_socket_open,this),this.socket.onmessage=h(this._on_socket_message,this),this.socket.onerror=h(this._on_socket_error,this),this.socket.onclose=h(this._on_socket_close,this),this.sendPinger=new w(this,window,this.connectOptions.keepAliveInterval),this.receivePinger=new w(this,window,this.connectOptions.keepAliveInterval),this._connectTimeout=new T(this,window,this.connectOptions.timeout,this._disconnected,[v.CONNECT_TIMEOUT.code,y(v.CONNECT_TIMEOUT)])},O.prototype._schedule_message=function(e){this._msg_queue.push(e),this.connected&&this._process_queue()},O.prototype.store=function(e,t){var n={type:t.type,messageIdentifier:t.messageIdentifier,version:1};switch(t.type){case d.PUBLISH:t.pubRecReceived&&(n.pubRecReceived=!0),n.payloadMessage={};for(var r="",o=t.payloadMessage.payloadBytes,i=0;i<o.length;i++)o[i]<=15?r=r+"0"+o[i].toString(16):r+=o[i].toString(16);n.payloadMessage.payloadHex=r,n.payloadMessage.qos=t.payloadMessage.qos,n.payloadMessage.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(n.payloadMessage.duplicate=!0),t.payloadMessage.retained&&(n.payloadMessage.retained=!0),0==e.indexOf("Sent:")&&(void 0===t.sequence&&(t.sequence=++this._sequence),n.sequence=t.sequence);break;default:throw Error(y(v.INVALID_STORED_DATA,[key,n]))}localStorage.setItem(e+this._localKey+t.messageIdentifier,JSON.stringify(n))},O.prototype.restore=function(e){var t=localStorage.getItem(e),n=JSON.parse(t),o=new b(n.type,n);switch(n.type){case d.PUBLISH:for(var i=n.payloadMessage.payloadHex,s=new ArrayBuffer(i.length/2),a=new Uint8Array(s),c=0;i.length>=2;){var u=parseInt(i.substring(0,2),16);i=i.substring(2,i.length),a[c++]=u}var l=new r.MQTT.Message(a);l.qos=n.payloadMessage.qos,l.destinationName=n.payloadMessage.destinationName,n.payloadMessage.duplicate&&(l.duplicate=!0),n.payloadMessage.retained&&(l.retained=!0),o.payloadMessage=l;break;default:throw Error(y(v.INVALID_STORED_DATA,[e,t]))}0==e.indexOf("Sent:"+this._localKey)?(o.payloadMessage.duplicate=!0,this._sentMessages[o.messageIdentifier]=o):0==e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[o.messageIdentifier]=o)},O.prototype._process_queue=function(){for(var e=null,t=this._msg_queue.reverse();e=t.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},O.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,this._sentMessages[e.messageIdentifier]=e,e.type===d.PUBLISH&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},O.prototype._on_socket_open=function(){
var e=new b(d.CONNECT,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},O.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data);for(var t=this._deframeMessages(e.data),n=0;n<t.length;n+=1)this._handleMessage(t[n])},O.prototype._deframeMessages=function(e){var n=new Uint8Array(e);if(this.receiveBuffer){var r=new Uint8Array(this.receiveBuffer.length+n.length);r.set(this.receiveBuffer),r.set(n,this.receiveBuffer.length),n=r,delete this.receiveBuffer}try{for(var o=0,i=[];o<n.length;){var s=t(n,o),a=s[0];if(o=s[1],null===a)break;i.push(a)}o<n.length&&(this.receiveBuffer=n.subarray(o))}catch(c){return void this._disconnected(v.INTERNAL_ERROR.code,y(v.INTERNAL_ERROR,[c.message,c.stack.toString()]))}return i},O.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case d.CONNACK:if(this._connectTimeout.cancel(),this.connectOptions.cleanSession){for(var t in this._sentMessages){var n=this._sentMessages[t];localStorage.removeItem("Sent:"+this._localKey+n.messageIdentifier)}this._sentMessages={};for(var t in this._receivedMessages){var r=this._receivedMessages[t];localStorage.removeItem("Received:"+this._localKey+r.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(v.CONNACK_RETURNCODE.code,y(v.CONNACK_RETURNCODE,[e.returnCode,g[e.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var o=new Array;for(var i in this._sentMessages)this._sentMessages.hasOwnProperty(i)&&o.push(this._sentMessages[i]);for(var o=o.sort(function(e,t){return e.sequence-t.sequence}),s=0,a=o.length;s<a;s++){var n=o[s];if(n.type==d.PUBLISH&&n.pubRecReceived){var c=new b(d.PUBREL,{messageIdentifier:n.messageIdentifier});this._schedule_message(c)}else this._schedule_message(n)}this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext}),this._process_queue();break;case d.PUBLISH:this._receivePublish(e);break;case d.PUBACK:var n=this._sentMessages[e.messageIdentifier];n&&(delete this._sentMessages[e.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(n.payloadMessage));break;case d.PUBREC:var n=this._sentMessages[e.messageIdentifier];if(n){n.pubRecReceived=!0;var c=new b(d.PUBREL,{messageIdentifier:e.messageIdentifier});this.store("Sent:",n),this._schedule_message(c)}break;case d.PUBREL:var r=this._receivedMessages[e.messageIdentifier];localStorage.removeItem("Received:"+this._localKey+e.messageIdentifier),r&&(this._receiveMessage(r),delete this._receivedMessages[e.messageIdentifier]);var u=new b(d.PUBCOMP,{messageIdentifier:e.messageIdentifier});this._schedule_message(u);break;case d.PUBCOMP:var n=this._sentMessages[e.messageIdentifier];delete this._sentMessages[e.messageIdentifier],localStorage.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(n.payloadMessage);break;case d.SUBACK:var n=this._sentMessages[e.messageIdentifier];n&&(n.timeOut&&n.timeOut.cancel(),e.returnCode.indexOf=Array.prototype.indexOf,e.returnCode.indexOf(128)!==-1?n.onFailure&&n.onFailure(e.returnCode):n.onSuccess&&n.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case d.UNSUBACK:var n=this._sentMessages[e.messageIdentifier];n&&(n.timeOut&&n.timeOut.cancel(),n.callback&&n.callback(),delete this._sentMessages[e.messageIdentifier]);break;case d.PINGRESP:this.sendPinger.reset();break;case d.DISCONNECT:this._disconnected(v.INVALID_MQTT_MESSAGE_TYPE.code,y(v.INVALID_MQTT_MESSAGE_TYPE,[e.type]));break;default:this._disconnected(v.INVALID_MQTT_MESSAGE_TYPE.code,y(v.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(l){return void this._disconnected(v.INTERNAL_ERROR.code,y(v.INTERNAL_ERROR,[l.message,l.stack.toString()]))}},O.prototype._on_socket_error=function(e){this._disconnected(v.SOCKET_ERROR.code,y(v.SOCKET_ERROR,[e.data]))},O.prototype._on_socket_close=function(){this._disconnected(v.SOCKET_CLOSE.code,y(v.SOCKET_CLOSE))},O.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},O.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new b(d.PUBACK,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var n=new b(d.PUBREC,{messageIdentifier:e.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+wireMmessage.payloadMessage.qos)}},O.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},O.prototype._disconnected=function(e,t){this._trace("Client._disconnected",e,t),this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&this._connectTimeout.cancel(),this._msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1?(this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex])):(void 0===e&&(e=v.OK.code,t=y(v.OK)),this.connected?(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t})):4===this.connectOptions.mqttVersion&&this.connectOptions.mqttVersionExplicit===!1?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t}))},O.prototype._trace=function(){if(this.traceFunction){for(var e in arguments)"undefined"!=typeof arguments[e]&&(arguments[e]=JSON.stringify(arguments[e]));var t=Array.prototype.slice.call(arguments).join("");this.traceFunction({severity:"Debug",message:t})}if(null!==this._traceBuffer)for(var e=0,n=arguments.length;e<n;e++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===e?this._traceBuffer.push(arguments[e]):"undefined"==typeof arguments[e]?this._traceBuffer.push(arguments[e]):this._traceBuffer.push("  "+JSON.stringify(arguments[e]))},O.prototype._traceMask=function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(r==t?n[r]="******":n[r]=e[r]);return n};var E=function(e,t,r,o){var i;if("string"!=typeof e)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof e?"undefined":n(e),"host"]));if(2==arguments.length){o=t,i=e;var s=i.match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!s)throw new Error(y(v.INVALID_ARGUMENT,[e,"host"]));e=s[4]||s[2],t=parseInt(s[7]),r=s[8]}else{if(3==arguments.length&&(o=r,r="/mqtt"),"number"!=typeof t||t<0)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof t?"undefined":n(t),"port"]));if("string"!=typeof r)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof r?"undefined":n(r),"path"]));var a=e.indexOf(":")!=-1&&"["!=e.slice(0,1)&&"]"!=e.slice(-1);i="ws://"+(a?"["+e+"]":e)+":"+t+r}for(var c=0,u=0;u<o.length;u++){var l=o.charCodeAt(u);55296<=l&&l<=56319&&u++,c++}if("string"!=typeof o||c>65535)throw new Error(y(v.INVALID_ARGUMENT,[o,"clientId"]));var f=new O(i,e,t,r,o);this._getHost=function(){return e},this._setHost=function(){throw new Error(y(v.UNSUPPORTED_OPERATION))},this._getPort=function(){return t},this._setPort=function(){throw new Error(y(v.UNSUPPORTED_OPERATION))},this._getPath=function(){return r},this._setPath=function(){throw new Error(y(v.UNSUPPORTED_OPERATION))},this._getURI=function(){return i},this._setURI=function(){throw new Error(y(v.UNSUPPORTED_OPERATION))},this._getClientId=function(){return f.clientId},this._setClientId=function(){throw new Error(y(v.UNSUPPORTED_OPERATION))},this._getOnConnectionLost=function(){return f.onConnectionLost},this._setOnConnectionLost=function(e){if("function"!=typeof e)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof e?"undefined":n(e),"onConnectionLost"]));f.onConnectionLost=e},this._getOnMessageDelivered=function(){return f.onMessageDelivered},this._setOnMessageDelivered=function(e){if("function"!=typeof e)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof e?"undefined":n(e),"onMessageDelivered"]));f.onMessageDelivered=e},this._getOnMessageArrived=function(){return f.onMessageArrived},this._setOnMessageArrived=function(e){if("function"!=typeof e)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof e?"undefined":n(e),"onMessageArrived"]));f.onMessageArrived=e},this._getTrace=function(){return f.traceFunction},this._setTrace=function(e){if("function"!=typeof e)throw new Error(y(v.INVALID_TYPE,["undefined"==typeof e?"undefined":n(e),"onTrace"]));f.traceFunction=e},this.connect=function(e){if(e=e||{},p(e,{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),e.mqttVersion>4||e.mqttVersion<3)throw new Error(y(v.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0===e.password&&void 0!==e.userName)throw new Error(y(v.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof I))throw new Error(y(v.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload,"undefined"==typeof e.willMessage.destinationName)throw new Error(y(v.INVALID_TYPE,[n(e.willMessage.destinationName),"connectOptions.willMessage.destinationName"]))}if("undefined"==typeof e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(y(v.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(y(v.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,o=0;o<e.hosts.length;o++){if("string"!=typeof e.hosts[o])throw new Error(y(v.INVALID_TYPE,[n(e.hosts[o]),"connectOptions.hosts["+o+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[o])){if(0==o)t=!0;else if(!t)throw new Error(y(v.INVALID_ARGUMENT,[e.hosts[o],"connectOptions.hosts["+o+"]"]))}else if(t)throw new Error(y(v.INVALID_ARGUMENT,[e.hosts[o],"connectOptions.hosts["+o+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports)throw new Error(y(v.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(y(v.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!=e.ports.length)throw new Error(y(v.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));e.uris=[];for(var o=0;o<e.hosts.length;o++){if("number"!=typeof e.ports[o]||e.ports[o]<0)throw new Error(y(v.INVALID_TYPE,[n(e.ports[o]),"connectOptions.ports["+o+"]"]));var s=e.hosts[o],a=e.ports[o],c=s.indexOf(":")!=-1;i="ws://"+(c?"["+s+"]":s)+":"+a+r,e.uris.push(i)}}}f.connect(e)},this.subscribe=function(e,t){if("string"!=typeof e)throw new Error("Invalid argument:"+e);if(t=t||{},p(t,{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if("undefined"!=typeof t.qos&&0!==t.qos&&1!==t.qos&&2!==t.qos)throw new Error(y(v.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));f.subscribe(e,t)},this.unsubscribe=function(e,t){if("string"!=typeof e)throw new Error("Invalid argument:"+e);if(t=t||{},p(t,{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");f.unsubscribe(e,t)},this.send=function(e,t,r,o){var i;if(0==arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof I)&&"string"!=typeof e)throw new Error("Invalid argument:"+("undefined"==typeof e?"undefined":n(e)));if(i=e,"undefined"==typeof i.destinationName)throw new Error(y(v.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));f.send(i)}else i=new I(t),i.destinationName=e,arguments.length>=3&&(i.qos=r),arguments.length>=4&&(i.retained=o),f.send(i)},this.disconnect=function(){f.disconnect()},this.getTraceLog=function(){return f.getTraceLog()},this.startTrace=function(){f.startTrace()},this.stopTrace=function(){f.stopTrace()},this.isConnected=function(){return f.connected}};E.prototype={get host(){return this._getHost()},set host(e){this._setHost(e)},get port(){return this._getPort()},set port(e){this._setPort(e)},get path(){return this._getPath()},set path(e){this._setPath(e)},get clientId(){return this._getClientId()},set clientId(e){this._setClientId(e)},get onConnectionLost(){return this._getOnConnectionLost()},set onConnectionLost(e){this._setOnConnectionLost(e)},get onMessageDelivered(){return this._getOnMessageDelivered()},set onMessageDelivered(e){this._setOnMessageDelivered(e)},get onMessageArrived(){return this._getOnMessageArrived()},set onMessageArrived(e){this._setOnMessageArrived(e)},get trace(){return this._getTrace()},set trace(e){this._setTrace(e)}};var I=function(e){var t;if(!("string"==typeof e||e instanceof ArrayBuffer||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array))throw y(v.INVALID_ARGUMENT,[e,"newPayload"]);t=e,this._getPayloadString=function(){return"string"==typeof t?t:l(t,0,t.length)},this._getPayloadBytes=function(){if("string"==typeof t){var e=new ArrayBuffer(c(t)),n=new Uint8Array(e);return u(t,n,0),n}return t};var n=void 0;this._getDestinationName=function(){return n},this._setDestinationName=function(e){if("string"!=typeof e)throw new Error(y(v.INVALID_ARGUMENT,[e,"newDestinationName"]));n=e};var r=0;this._getQos=function(){return r},this._setQos=function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);r=e};var o=!1;this._getRetained=function(){return o},this._setRetained=function(e){if("boolean"!=typeof e)throw new Error(y(v.INVALID_ARGUMENT,[e,"newRetained"]));o=e};var i=!1;this._getDuplicate=function(){return i},this._setDuplicate=function(e){i=e}};return I.prototype={get payloadString(){return this._getPayloadString()},get payloadBytes(){return this._getPayloadBytes()},get destinationName(){return this._getDestinationName()},set destinationName(e){this._setDestinationName(e)},get qos(){return this._getQos()},set qos(e){this._setQos(e)},get retained(){return this._getRetained()},set retained(e){this._setRetained(e)},get duplicate(){return this._getDuplicate()},set duplicate(e){this._setDuplicate(e)}},{Client:E,Message:I}}(window),e.exports=r}]);